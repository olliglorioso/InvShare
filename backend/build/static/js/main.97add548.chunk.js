(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{161:function(e,t,n){"use strict";n.r(t);var c,a,r,o,s=n(60),i=n(0),j=n.n(i),l=n(16),d=n.n(l),u=n(126),b=n.n(u),O=n(197),p=Object(O.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},appBarTitle:{flexGrow:1,textAlign:"center"}}})),h=function(e){return{type:e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENABLE":return!0;case"DISABLE":return!1;default:return e}},x=n(201),g=n(202),f=n(203),v=n(82),y=n(204),k=n(26),w=n(21),C=n(65),S=n(200),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string"===typeof localStorage.getItem("usersToken"),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return localStorage.setItem("usersToken",t.token),!0;case"LOGOUT":return localStorage.removeItem("usersToken"),!1;default:return e}},N=n(4),B=function(){var e=p(),t=Object(k.b)(),n=Object(w.g)(),c=Object(k.c)((function(e){return e.user})),a=Object(S.a)(),r=Object(w.f)();return Object(N.jsx)("div",{children:Object(N.jsx)(x.a,{style:{background:"black"},children:Object(N.jsxs)(g.a,{children:[Object(N.jsx)("div",{children:c?Object(N.jsx)(f.a,{id:"sideBarButton",onClick:function(){return t(h("ENABLE"))},edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(N.jsx)(b.a,{})}):Object(N.jsx)("div",{})}),Object(N.jsx)(v.a,{className:e.appBarTitle,variant:"h6",children:Object(N.jsx)(y.a,{children:Object(N.jsx)(C.b,{to:"/",style:{color:"white",textDecoration:"none",fontSize:20},children:"InvShare"})})}),"/login"===n.pathname||c?Object(N.jsx)("div",{}):Object(N.jsx)(y.a,{id:"loginButton",color:"inherit",children:Object(N.jsx)(C.b,{to:"/login",style:{color:"white",textDecoration:"none"},children:"Log in"})}),c?Object(N.jsx)(y.a,{onClick:function(){return r.push("/"),t({type:"LOGOUT"}),localStorage.clear(),void a.resetStore()},style:{color:"white"},children:"Log out"}):Object(N.jsx)("div",{})]})})})},A=n(229),E=n(205),L=n(206),T=n(208),P=n(209),$=n(207),U=n(210),_=n(211),M=Object(O.a)({paper:{background:"black",color:"white"},divider:{background:"white"}}),F=function(){var e=Object(k.b)(),t=Object(k.c)((function(e){return e.sidebar})),n=M(),c=Object(w.f)();return Object(N.jsx)("div",{children:Object(N.jsx)(A.a,{anchor:"left",open:t,onClose:function(){e(h("DISABLE"))},classes:{paper:n.paper},children:Object(N.jsx)("div",{children:Object(N.jsxs)(E.a,{children:[Object(N.jsxs)(L.a,{button:!0,onClick:function(){},children:[Object(N.jsx)($.a,{}),Object(N.jsx)(T.a,{inset:!0,primary:"My profile"})]}),Object(N.jsx)(P.a,{classes:{root:n.divider}}),Object(N.jsxs)(L.a,{button:!0,onClick:function(){},children:[Object(N.jsx)(U.a,{}),Object(N.jsx)(T.a,{inset:!0,primary:"Settings"})]}),Object(N.jsx)(P.a,{classes:{root:n.divider}}),Object(N.jsxs)(L.a,{button:!0,onClick:function(){return c.push("/mystocks")},children:[Object(N.jsx)(_.a,{}),Object(N.jsx)(T.a,{inset:!0,primary:"Buy stocks"})]})]})})})})},G=n(217),z=n(75),H=n.n(z),D=n(90),R=n(66),q=n(98),J=n(222),K=n(215),V=n(216),X=n(164),Y=n(81),Q=n(226),W=(Object(Q.a)(c||(c=Object(Y.a)(["\nmutation addUser($addUserUsername: String!, $addUserPassword: String!) {\n    addUser(username: $addUserUsername, password: $addUserPassword) {\n        username\n        passwordHash\n    }\n  }\n"]))),Object(Q.a)(a||(a=Object(Y.a)(["\nmutation buyStock($stockName: String!, $amount: Int!) {\n  buyStock(stockName: $stockName, amount: $amount) {\n    transactionDate\n    transactionStock\n    transactionStockAmount\n    transactionStockPrice\n  }\n}\n"])))),Z=Object(Q.a)(r||(r=Object(Y.a)(["\n  query individualStock($company: String!) {\n    individualStock (company: $company) {\n      close\n      date\n      high\n      low\n      open\n      volume\n    }\n  }\n"]))),ee=Object(Q.a)(o||(o=Object(Y.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password)  {\n      value\n    }\n  }\n"]))),te=n(231),ne=Object(X.a)({root:{"& label.Mui-focused":{color:"grey"},"& .MuiInput-underline:after":{borderBottomColor:"black"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"grey"},"&:hover fieldset":{borderColor:"grey"},"&.Mui-focused fieldset":{borderColor:"black"}}}})(J.a),ce=function(){var e=Object(te.a)(ee),t=Object(R.a)(e,2),n=t[0],c=t[1],a=Object(k.b)();Object(i.useEffect)((function(){try{a({type:"LOGIN",token:c.data.login.value}),r.push("/")}catch(e){console.log("ei ole olemassa k\xe4ytt\xe4j\xe4\xe4")}}),[c.data]);var r=Object(w.f)(),o=Object(q.b)({initialValues:{username:"",password:""},onSubmit:function(){var e=Object(D.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({variables:{username:t.username,password:t.password}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(N.jsxs)("form",{onSubmit:o.handleSubmit,children:[Object(N.jsx)(ne,{id:"username",type:"username",variant:"outlined",label:"Username",onChange:o.handleChange,value:o.values.username,InputProps:{startAdornment:Object(N.jsx)(K.a,{position:"start",children:Object(N.jsx)($.a,{})})}}),Object(N.jsx)("p",{}),Object(N.jsx)(ne,{id:"password",type:"password",variant:"outlined",label:"Password",onChange:o.handleChange,value:o.values.password,InputProps:{startAdornment:Object(N.jsx)(K.a,{position:"start",children:Object(N.jsx)(V.a,{})})}}),Object(N.jsx)("p",{}),Object(N.jsx)(y.a,{id:"tryToLoginButton",variant:"contained",type:"submit",style:{background:"black",color:"white",width:255},children:"Log in"}),Object(N.jsx)("p",{style:{fontSize:20,alignContent:"center"}})]})},ae=function(){return Object(N.jsxs)("div",{children:[Object(N.jsxs)("div",{children:[Object(N.jsx)(F,{}),Object(N.jsx)(B,{})]}),Object(N.jsxs)("div",{children:[Object(N.jsx)(G.a,{container:!0,spacing:0,direction:"row",justifyContent:"center",style:{minHeight:"100vh"},children:Object(N.jsx)(G.a,{container:!0,item:!0,xs:5,alignItems:"center",justifyContent:"center",children:Object(N.jsx)(ce,{})})}),Object(N.jsx)(G.a,{container:!0,spacing:0,direction:"column",style:{minHeight:"100vh"}})]})]})},re=n(131),oe=n.n(re),se=n(228),ie=function(e){return{type:"CHANGE_PRICE",stock:"moikka",price:e}},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stockName:"",stockPrice:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_STOCK":return Object(s.a)(Object(s.a)({},e),{},{stockName:t.stock});case"CHANGE_PRICE":return Object(s.a)(Object(s.a)({},e),{},{stockPrice:t.price});default:return e}},le=function(e){var t=Object(se.a)(Z,{variables:{company:e.stock}}),n=t.data,c=(t.loading,Object(k.b)()),a=[];n&&(a=n.individualStock.map((function(e){return{close:e.close,date:e.date}}))),Object(i.useEffect)((function(){a&&void 0!==a[a.length-1]&&c(ie(a[a.length-1].close)),a&&0===a.length&&c(ie(0))}),[n]);var r={chart:{id:"tesla_b\xf6rse",fontFamily:"Roboto",background:"FFFFFF",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!1,selection:!1,zoom:'<img src="https://image.flaticon.com/icons/png/512/1086/1086933.png" style="padding-top: 3px;" width="22">',zoomin:!1,zoomout:!1,pan:'<img src="https://image.flaticon.com/icons/png/512/1/1427.png" width="30">',reset:'<img src="https://image.flaticon.com/icons/png/512/32/32303.png" width="22" style="padding-top: 3px;">'},autoSelected:"zoom"}},colors:["#000000","#000000"],stroke:{width:1},xaxis:{categories:a.map((function(e){return e.date})),type:"datetime",labels:{rotate:0}}},o=[{name:e.stock.toUpperCase(),data:a.map((function(e){return e.close}))||[0]}];return Object(N.jsx)("div",{children:Object(N.jsx)(oe.a,{options:r,series:o,type:"line",height:350})})},de=n(218),ue=n(219),be=n(220),Oe=n(232),pe=Object(X.a)({root:{"& label.Mui-focused":{color:"grey"},"& .MuiInput-underline:after":{borderBottomColor:"black"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"grey"},"&:hover fieldset":{borderColor:"grey"},"&.Mui-focused fieldset":{borderColor:"black"}}}})(J.a),he=function(e){var t=e.price,n=e.amount,c="Total: 0.00";return 0!==t&&"0"!==n&&""!==n&&(c="Total: ".concat((t*parseFloat(n)).toFixed(2),"$")),Object(N.jsx)(v.a,{style:{paddingTop:5,paddingBottom:5},children:c})},me=function(e){var t=e.price,n=e.handleChange,c=e.setLoading,a=t;return Object(i.useEffect)((function(){a=t,0===t&&c(!0)}),[t]),Object(N.jsx)(pe,{id:"price_per_stock",type:"price_per_stock",variant:"outlined",label:"Price per stock",onChange:n,value:a,InputProps:{startAdornment:Object(N.jsx)(K.a,{position:"start",children:Object(N.jsx)(de.a,{})})}})},xe=function(e){var t=e.companyName,n=e.setLoading,c=Object(i.useState)(t),a=Object(R.a)(c,2),r=a[0],o=a[1],s=Object(k.b)(),j=Object(Oe.a)(r,2e3),l=Object(R.a)(j,1)[0];Object(i.useEffect)((function(){s({type:"CHANGE_STOCK",stock:l,price:0}),""!==l&&n(!1)}),[l]);var d=function(){var e=Object(D.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(t.target.value),n(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{children:Object(N.jsx)(pe,{id:"company",autoComplete:"off",type:"company",variant:"outlined",label:"Company",onChange:d,value:r,InputProps:{startAdornment:Object(N.jsx)(K.a,{position:"start",children:Object(N.jsx)(ue.a,{})})}})})},ge=function(){var e=Object(k.c)((function(e){return e.stock.stockPrice})),t=Object(k.c)((function(e){return e.stock.stockName})),n=Object(i.useState)(!0),c=Object(R.a)(n,2),a=(c[0],c[1]),r=Object(te.a)(W),o=Object(R.a)(r,2),s=o[0];o[1].data;return Object(N.jsx)("div",{children:Object(N.jsx)(q.a,{initialValues:{company:"",amount:"1",price_per_stock:""},onSubmit:function(e){s({variables:{stockName:t.toUpperCase(),amount:parseInt(e.amount)}})},children:function(t){var n=t.handleSubmit,c=t.values,r=t.handleChange;return Object(N.jsxs)("form",{onSubmit:n,children:[Object(N.jsx)(xe,{setLoading:a,companyName:c.company}),Object(N.jsx)("p",{}),Object(N.jsx)(pe,{id:"amount",type:"number",variant:"outlined",label:"Amount",onChange:r,value:c.amount,InputProps:{startAdornment:Object(N.jsx)(K.a,{position:"start",children:Object(N.jsx)(be.a,{})})}}),Object(N.jsx)("p",{}),Object(N.jsx)(me,{setLoading:a,price:e,handleChange:r}),Object(N.jsx)(he,{price:e,amount:c.amount}),Object(N.jsx)(y.a,{variant:"contained",type:"submit",style:{background:"black",color:"white",width:255},children:"Buy"}),Object(N.jsx)("p",{style:{fontSize:20,alignContent:"center"}})]})}})})},fe=function(){var e=Object(k.c)((function(e){return e.stock.stockName}));return Object(N.jsxs)("div",{style:{backgroundColor:"white",textAlign:"center",paddingTop:100},children:[Object(N.jsxs)("div",{children:[Object(N.jsx)(F,{}),Object(N.jsx)(B,{})]}),Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around"},children:[Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsx)(le,{stock:e})}),Object(N.jsx)("div",{style:{paddingTop:15,width:500},children:Object(N.jsx)(ge,{})})]})]})};var ve=function(){return Object(N.jsx)(C.a,{children:Object(N.jsxs)(w.c,{children:[Object(N.jsx)(w.a,{path:"/",exact:!0,children:Object(N.jsxs)("div",{children:[Object(N.jsx)(F,{}),Object(N.jsx)(B,{})]})}),Object(N.jsx)(w.a,{path:"/mystocks",exact:!0,children:Object(N.jsx)(fe,{})}),Object(N.jsx)(w.a,{path:"/login",exact:!0,children:Object(N.jsx)(ae,{})})]})})},ye=n(112),ke=n(224),we=n(223),Ce=n(225),Se=n(221),Ie=n(132),Ne=Object(ye.a)({user:I,sidebar:m,stock:je}),Be=Object(ye.b)(Ne),Ae=Object(Ie.a)((function(e,t){var n=t.headers,c=localStorage.getItem("usersToken");return{headers:Object(s.a)(Object(s.a)({},n),{},{authorization:c?"bearer ".concat(c):null})}})),Ee=new ke.a({uri:"http://localhost:4000/graphql"}),Le=new we.a({cache:new Ce.a,link:Ae.concat(Ee)});d.a.render(Object(N.jsx)(j.a.StrictMode,{children:Object(N.jsx)(k.a,{store:Be,children:Object(N.jsx)(Se.a,{client:Le,children:Object(N.jsx)(ve,{})})})}),document.getElementById("root"))}},[[161,1,2]]]);
//# sourceMappingURL=main.97add548.chunk.js.map