(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{394:function(e,t,n){"use strict";n.r(t);var a,r,s,i,o,c,l,d,u,j,b,m,h,p,O,f,g,x,v=n(20),y=n(0),w=n.n(y),k=n(19),C=n.n(k),S=n(205),N=n.n(S),D=function(e){return{type:e}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENABLE":return!0;case"DISABLE":return!1;default:return e}},A=n(436),P=n(437),E=n(438),I=n(68),F=n(439),B=n(15),U=n(25),L=n(62),_=n(435),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:localStorage.getItem("loggedUser")?localStorage.getItem("loggedUser"):""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return localStorage.setItem("usersToken",t.token),localStorage.setItem("loggedUser",t.username),{username:t.username};case"LOGOUT":return localStorage.removeItem("usersToken"),localStorage.removeItem("loggedUser"),{username:""};default:return e}},M=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NO_PURCHASES":return!1;case"FIRST_PURCHASE":return!0;default:return e}},R=n(120),z=n.n(R),q=(n(256),function(e,t,n){R.store.addNotification({title:e,message:t,type:n,insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}})}),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notification:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return{notification:t.notification};default:return e}},V=n(432),W=Object(V.a)((function(e){return{invShareLink:{color:"white",textDecoration:"none",fontSize:20},menuButton:{marginRight:e.spacing(2)},appBarTitle:{flexGrow:1,textAlign:"center"},loginLink:{color:"white",textDecoration:"none"},defaultPageTitle:{display:"flex",justifyContent:"center",fontSize:30,fontWeight:"bold",paddingBottom:10},defaultPageDiv:{background:"white",paddingBottom:"60vh",paddingTop:"15vh",margin:5,display:"flex",flexDirection:"column"},paper:{background:"black",color:"white"},divider:{background:"white",height:3}}})),G=n(1),Y=function(e){var t=e.stockSubscription,n=W(),a=Object(B.b)(),r=Object(U.h)(),s=Object(B.c)((function(e){return e.user.username})),i=Object(B.c)((function(e){return e.notification})),o=Object(_.a)(),c=Object(U.g)();Object(y.useEffect)((function(){if(t.trans&&t.me!==s&&i.notification!==t.trans.transactionDate){a({type:"SET_NOTIFICATION",notification:t.trans.transactionDate});var e="".concat(t.me," purchased ").concat(t.trans.transactionStockAmount," x ").concat(t.trans.transactionStock.stockSymbol," for ").concat(t.trans.transactionStockPrice),n="Buy"===t.trans.transactionType?e:e.replace("purchased","sold");q("Notification",n,"info")}}),[t]);return Object(G.jsx)("div",{children:Object(G.jsx)(A.a,{style:{background:"black"},children:Object(G.jsxs)(P.a,{children:[Object(G.jsx)("div",{children:s?Object(G.jsx)(E.a,{id:"sideBarButton",onClick:function(){return a(D("ENABLE"))},edge:"start",className:n.menuButton,color:"inherit","aria-label":"menu",children:Object(G.jsx)(N.a,{})}):Object(G.jsx)("div",{})}),Object(G.jsx)(I.a,{className:n.appBarTitle,variant:"h6",children:Object(G.jsx)(F.a,{children:Object(G.jsx)(L.b,{to:"/",className:n.invShareLink,children:"InvShare"})})}),"/login"===r.pathname||s?Object(G.jsx)("div",{}):Object(G.jsx)(F.a,{id:"loginButton",color:"inherit",children:Object(G.jsx)(L.b,{to:"/login",className:n.loginLink,children:"Log in / sign up"})}),s?Object(G.jsx)(F.a,{onClick:function(){return function(){try{localStorage.clear(),o.clearStore(),a({type:"LOGOUT"}),a({type:"FIRST_PURCHASE"}),c.push("/")}catch(e){q("An error occured.","Error while logging out.","danger")}}()},style:{color:"white"},children:"Log out"}):Object(G.jsx)("div",{})]})})})},K=n(450),Q=n(23),J=n.n(Q),X=n(39),Z=n(17),ee=n(55),te=n(447),ne=n(448),ae=n(449),re=n(29),se=n(483),ie=Object(se.a)(a||(a=Object(re.a)(["\n  fragment StockDetails on IndividualStock {\n    close\n    date\n    high\n    low\n    open\n    volume\n  }\n"]))),oe=Object(se.a)(r||(r=Object(re.a)(["\n  fragment TransactionDetails on Transaction {\n    transactionDate\n    transactionStock {\n      stockSymbol\n      stockTotalAmount\n    }\n    transactionStockAmount\n    transactionStockPrice\n    transactionType\n    _id\n  }\n"]))),ce=Object(se.a)(s||(s=Object(re.a)(["\n  query searchUser($username: String!) {\n    searchUser(username: $username) {\n      usersUsername\n      usersFollowers {\n        user {\n          usersUsername\n        }\n      }\n      usersHoldings {\n        usersStock {\n          stockTotalAmount\n          stockSymbol\n        }\n        usersTotalAmount\n        usersTotalOriginalPriceValue\n      }\n      usersTransactions {\n        ...TransactionDetails\n      }\n      moneyMade\n      followerCount\n      followingCount\n    }\n  }\n  ","\n"])),oe),le=Object(se.a)(i||(i=Object(re.a)(["\n  mutation follow($username: String!) {\n    followUser(username: $username) {\n      result\n    }\n  }\n"]))),de=Object(se.a)(o||(o=Object(re.a)(["\n  mutation addUser($username: String!, $password: String!) {\n    addUser(username: $username, password: $password) {\n      usersUsername\n    }\n  }\n"]))),ue=Object(se.a)(c||(c=Object(re.a)(["\n  mutation sellStock($stockName: String!, $amount: Int!, $price: Float!) {\n    sellStock(stockName: $stockName, amount: $amount, price: $price) {\n      ...TransactionDetails\n    }\n  }\n  ","\n"])),oe),je=Object(se.a)(l||(l=Object(re.a)(["\n  mutation unfollowUser($username: String!) {\n    unfollowUser(username: $username) {\n      result\n    }\n  }\n"]))),be=Object(se.a)(d||(d=Object(re.a)(["\n  mutation buyStock($stockName: String!, $amount: Int!) {\n    buyStock(stockName: $stockName, amount: $amount) {\n      ...TransactionDetails\n    }\n  }\n  ","\n"])),oe),me=Object(se.a)(u||(u=Object(re.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      value\n      username\n    }\n  }\n"]))),he=Object(se.a)(j||(j=Object(re.a)(["\n  query searchUser($username: String!) {\n    searchUser(username: $username) {\n      usersUsername\n    }\n  }\n"]))),pe=Object(se.a)(b||(b=Object(re.a)(["\n  query stockHistory($symbol: String!) {\n    stockHistory(symbol: $symbol) {\n      time_series {\n        date\n        value\n      }\n      metadata {\n        information\n        symbol\n        lastRefresh\n      }\n    }\n  }\n"]))),Oe=Object(se.a)(m||(m=Object(re.a)(["\n  query GetActions {\n    getActions {\n      transaction {\n        ...TransactionDetails\n      }\n      transactionOwner\n    }\n  }\n  ","\n"])),oe),fe=Object(se.a)(h||(h=Object(re.a)(["\n  query cpv($mode: String!) {\n    currentPortfolioValue(mode: $mode) {\n      wholeValue\n      analysisValues {\n        name\n        sticks {\n          ...StockDetails\n        }\n      }\n    }\n  }\n  ","\n"])),ie),ge=Object(se.a)(p||(p=Object(re.a)(["\n  query {\n    me {\n      usersUsername\n      usersHoldings {\n        usersStock {\n          stockTotalAmount\n          stockSymbol\n        }\n        usersTotalAmount\n        usersTotalOriginalPriceValue\n      }\n      usersTransactions {\n        ...TransactionDetails\n      }\n      moneyMade\n      followerCount\n      followingCount\n    }\n  }\n  ","\n"])),oe),xe=Object(se.a)(O||(O=Object(re.a)(["\n  query individualStock($company: String!) {\n    individualStock(company: $company) {\n      ...StockDetails\n    }\n  }\n  ","\n"])),ie),ve=(Object(se.a)(f||(f=Object(re.a)(["\n  mutation resetDatabase {\n    resetDatabase {\n      result\n    }\n  }\n"]))),Object(se.a)(g||(g=Object(re.a)(["\n  subscription StockEvent ($username: String) {\n    stockEvent (username: $username){\n      transaction {\n        ...TransactionDetails\n      }\n      me\n    }\n  }\n  ","\n"])),oe)),ye=Object(se.a)(x||(x=Object(re.a)(["\n  subscription followEvent ($username: String){\n    followEvent (username: $username) {\n      auteur\n      object\n      followType\n      date\n    }\n  }\n"]))),we=de,ke=n(490),Ce=n(33),Se=n(395),Ne=n(481),De=n(492),Te=n(440),Ae="category",Pe={chart:{id:"b\xf6rse",fontFamily:"Roboto",background:"FFFFFF",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!1,selection:!1,zoom:'<img src="https://image.flaticon.com/icons/png/512/1086/1086933.png" style="padding-top: 3px;" width="22">',zoomin:!1,zoomout:!1,pan:'<img src="https://image.flaticon.com/icons/png/512/1/1427.png" width="30">',reset:'<img src="https://image.flaticon.com/icons/png/512/32/32303.png" width="22" style="padding-top: 3px;">'},autoSelected:"zoom"}},colors:["#000000","#000000"],stroke:{width:1}},Ee=Object(De.a)(Te.a)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),Ie=Object(Se.a)({root:{"& label.Mui-focused":{color:"grey"},"& .MuiInput-underline:after":{borderBottomColor:"black"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"grey"},"&:hover fieldset":{borderColor:"grey"},"&.Mui-focused fieldset":{borderColor:"black"}}}})(Ne.a),Fe=Object(Se.a)({root:{"& label.Mui-focused":{color:"grey"},"& .MuiInput-underline:after":{borderBottomColor:"black"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"grey"},"&:hover fieldset":{borderColor:"grey"},"&.Mui-focused fieldset":{borderColor:"black"}},width:"20vw"}})(Ne.a),Be=function(e){return e<10?"0"+e.toString():e.toString()},Ue=Object(V.a)({errorColor:{color:"red"},loginButton:{background:"black",color:"white",width:255},loginPageFirstDiv:{background:"white",paddingBottom:"60vh",paddingTop:"15vh",margin:"5",display:"flex",flexDirection:"column"},loginPageDivs:{display:"flex",justifyContent:"center"},loginDivider:{width:"90%",color:"grey",height:2}}),Le=function(e){return"string"===typeof e||e instanceof String},_e=function(e){return e instanceof Number||"number"===typeof e},$e=function(e){if(!e||!e.username||!e.password||!Le(e.username)||!Le(e.password))throw q("Error.","Incorrect type of username or password","danger"),new Error("Incorrect type of username or password.");if(e.username.length<4)throw q("Error.","Username must be at least 4 characters long.","danger"),new Error("Username too short.");if(e.password.length<8)throw q("Error.","Password must be at most 8 characters long.","danger"),new Error("Password too short.");return e},Me=function(e){if(Le(e))return e;throw q("Error.","Company is not a string.","danger"),new Error("Company is not a string.")},Re=Ce.b().shape({username:Ce.d().required("Required field.").min(4,"Must be at least 4 characters."),password:Ce.d().required("Required field.").min(8,"Must be at least 8 characters.")}),ze=function(){var e=Ue(),t=Object(ke.a)(me),n=Object(Z.a)(t,2),a=n[0],r=n[1],s=Object(B.b)(),i=Object(U.g)();Object(y.useEffect)((function(){try{s((e=r.data.login.value,t=r.data.login.username,{type:"LOGIN",token:e,username:t})),i.push("/")}catch(n){return}var e,t}),[r.data]);return Object(G.jsx)(ee.a,{initialValues:{username:"",password:""},onSubmit:function(){var e=Object(X.a)(J.a.mark((function e(t){var n,r,s;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,s=$e({username:n,password:r}),e.prev=2,e.next=5,a({variables:{username:s.username,password:s.password}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),q("Failed.",e.t0.message,"danger");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:Re,children:function(t){var n=t.handleSubmit,a=t.values,r=t.errors,s=t.handleChange,i=t.handleBlur,o=t.touched;return Object(G.jsxs)("form",{onSubmit:n,children:[Object(G.jsx)("p",{}),Object(G.jsx)(Ie,{id:"username",type:"username",variant:"outlined",label:"Username",onChange:s,onBlur:i,value:a.username,InputProps:{startAdornment:Object(G.jsx)(te.a,{position:"start",children:Object(G.jsx)(ne.a,{})})}}),r.username&&o.username?Object(G.jsx)("div",{className:e.errorColor,children:r.username}):null,Object(G.jsx)("p",{}),Object(G.jsx)(Ie,{id:"password",type:"password",variant:"outlined",label:"Password",onChange:s,onBlur:i,value:a.password,InputProps:{startAdornment:Object(G.jsx)(te.a,{position:"start",children:Object(G.jsx)(ae.a,{})})}}),r.password&&o.password?Object(G.jsx)("div",{className:e.errorColor,children:r.password}):null,Object(G.jsx)("p",{}),Object(G.jsx)(F.a,{id:"tryToLoginButton",variant:"contained",type:"submit",className:e.loginButton,children:"Log in"}),Object(G.jsx)("p",{style:{fontSize:20}})]})}})},qe=n(90),He=(n(148),Ce.b().shape({username:Ce.d().min(4,"Username must be at least 4 characters.").max(15,"Username must be 15 characters or less.").required("Username is required."),password:Ce.d().min(8,"Password must be at least 8 characters.").max(15,"Password must be 15 characters or less.").required("Password is required."),password_again:Ce.d().oneOf([Ce.c("password"),null],"Passwords must match.").required("Password confirmation is required.")})),Ve=function(){var e=Ue(),t=Object(ke.a)(we),n=Object(Z.a)(t,1)[0];return Object(G.jsx)(ee.a,{initialValues:{username:"",password:"",password_again:""},validationSchema:He,onSubmit:function(e){Object(qe.confirmAlert)({title:"Confirmation",message:"Create an account with the name ".concat(e.username,"?"),buttons:[{label:"Yes",onClick:function(){var t=Object(X.a)(J.a.mark((function t(){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({variables:{username:e.username,password:e.password}});case 3:q("Success.","You created an account with the name ".concat(e.username,"."),"success"),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),q("Error.",t.t0.message||"Something went wrong.","danger"),t.t0.message.includes("password")?e.password="":t.t0.message.includes("username")&&(e.username="");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}()},{label:"No",onClick:function(){q("Canceled","You didn't create a new account.","info")}}]})},children:function(t){var n=t.values,a=t.handleChange,r=t.handleSubmit,s=t.errors,i=t.touched,o=t.handleBlur;return Object(G.jsxs)("form",{onSubmit:r,children:[Object(G.jsx)(Ie,{id:"usernameSignUp",label:"Username",name:"username",type:"text",variant:"outlined",onChange:a,value:n.username,onBlur:o,InputProps:{startAdornment:Object(G.jsx)(te.a,{position:"start",children:Object(G.jsx)(ne.a,{})})}}),s.username&&i.username?Object(G.jsx)("div",{className:e.errorColor,children:s.username}):null,Object(G.jsx)("p",{}),Object(G.jsx)(Ie,{id:"passwordSignUp",label:"Password",name:"password",type:"password",variant:"outlined",onChange:a,value:n.password,onBlur:o,InputProps:{startAdornment:Object(G.jsx)(te.a,{position:"start",children:Object(G.jsx)(ae.a,{})})}}),s.password&&i.password?Object(G.jsx)("div",{className:e.errorColor,children:s.password}):null,Object(G.jsx)("p",{}),Object(G.jsx)(Ie,{id:"password_again",label:"Password again",name:"password_again",type:"password",variant:"outlined",onChange:a,value:n.password_again,onBlur:o,InputProps:{startAdornment:Object(G.jsx)(te.a,{position:"start",children:Object(G.jsx)(ae.a,{})})}}),s.password_again&&i.password_again?Object(G.jsx)("div",{className:e.errorColor,children:s.password_again}):null,Object(G.jsx)("p",{}),Object(G.jsx)(F.a,{type:"submit",variant:"contained",color:"primary",className:e.loginButton,id:"signUpButton",children:"Sign up"})]})}})},We=function(){var e=Ue();return Object(G.jsx)("div",{className:e.loginPageFirstDiv,children:Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:e.loginPageDivs,children:Object(G.jsx)(I.a,{variant:"h5",children:"Log in"})}),Object(G.jsx)("p",{}),Object(G.jsx)("div",{className:e.loginPageDivs,children:Object(G.jsx)(ze,{})}),Object(G.jsx)("p",{}),Object(G.jsxs)("div",{className:e.loginPageDivs,children:[Object(G.jsx)("p",{}),Object(G.jsx)(K.a,{className:e.loginDivider})]}),Object(G.jsx)("div",{className:e.loginPageDivs,children:Object(G.jsx)(I.a,{variant:"h5",children:"Sign up"})}),Object(G.jsx)("p",{}),Object(G.jsx)("div",{className:e.loginPageDivs,children:Object(G.jsx)(Ve,{})})]})})},Ge=n(218),Ye=n(91),Ke=n.n(Ye),Qe=n(451),Je=function(e){return{type:"CHANGE_STOCK",stock:e,price:0}},Xe=function(e){return{type:"CHANGE_PRICE",stock:"moikka",price:e}},Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stockName:"",stockPrice:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_STOCK":return Object(v.a)(Object(v.a)({},e),{},{stockName:t.stock});case"CHANGE_PRICE":return Object(v.a)(Object(v.a)({},e),{},{stockPrice:t.price});default:return e}},et=n(212),tt=n.n(et),nt=function(e){var t=e.type,n=e.color;return Object(G.jsx)(tt.a,{type:t,color:n,height:"10%",width:"10%"})},at=Object(V.a)({finalInformationTypography:{paddingTop:5,paddingBottom:5},animationLastTypography:{fontSize:15,paddingTop:4},errorColor:{color:"red"},loadingAnimationDiv:{display:"flex",justifyContent:"center",alignItems:"center",height:300},chartError:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",color:"red"},stockPageFirstDiv:{backgroundColor:"white",textAlign:"center",paddingTop:"20vh",paddingBottom:"20vh",margin:5},stockPageSecondDiv:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},stockPageAnimationDiv:{height:0,paddingBottom:55,paddingRight:"10vw"},stockPageAnimationTypography:{width:160,fontSize:15},buyStockFormButton:{width:"20vw",background:"black",color:"white"},stockPageLastDiv:{display:"flex",flexDirection:"row",justifyContent:"end",paddingRight:"2"},mainChartWidth:{width:"96%"},mainChartDiv:{display:"flex",flexDirection:"row"},buyStocksHigherDiv:{paddingTop:40,width:"20vw",paddingRight:5}}),rt=["data","loading"],st=function(e){var t=at(),n=Me(e.stock),a=Object(Qe.a)(xe,{variables:{company:n}}),r=a.data,s=a.loading,i=Object(Ge.a)(a,rt),o=Object(B.b)(),c=[];r&&(c=r.individualStock.map((function(e){return{close:e.close,date:e.date}}))),Object(y.useEffect)((function(){c&&void 0!==c[c.length-1]&&o(Xe(c[c.length-1].close)),c&&0===c.length&&o(Xe(0))}),[r]);var l=Object(v.a)(Object(v.a)({},Pe),{},{xaxis:{categories:c.map((function(e){return e.date})),type:Ae,labels:{formatter:function(e){var t=new Date(e);return"".concat(t.getDate(),".").concat(t.getMonth(),", ").concat(Be(t.getHours()),":").concat(Be(t.getMinutes()))}}}}),d=[{name:e.stock.toUpperCase(),data:c.map((function(e){return e.close.toFixed(2)}))||[0]}];return Object(G.jsxs)("div",{children:[Object(G.jsx)(I.a,{children:"Last 96 hours"}),s?Object(G.jsx)("div",{className:t.loadingAnimationDiv,children:Object(G.jsx)(nt,{type:"spin",color:"black"})}):i.error&&"Incorrect or missing symbol."!==i.error.graphQLErrors[0].message?Object(G.jsx)("div",{className:t.chartError,children:i.error.graphQLErrors[0].message}):Object(G.jsx)(Ke.a,{options:l,series:d,type:"line",height:300})]})},it=n(452),ot=n(453),ct=n(454),lt=n(493),dt=n(63),ut=function(e){var t=e.price,n=e.amount,a=function(e){if(_e(e))return e;if(Le(e))return parseFloat(e);throw q("Error.","Price is neither a number nor a string.","danger"),new Error("Could not parse price")}(t),r=function(e){if(_e(e))return e.toString();if(Le(e))return e;throw q("Error.","Amount is neither a number nor a string.","danger"),new Error("Amount is neither a number nor a string.")}(n),s="Total: 0.00";return 0!==a&&"0"!==r&&""!==r&&(s="Total: ".concat((a*parseFloat(r)).toFixed(2),"$")),Object(G.jsx)(I.a,{className:"finalInformationTypography",children:s})},jt=function(e){var t=e.price,n=e.handleChange;return Object(G.jsx)(Fe,{id:"price_per_stock",type:"price_per_stock",variant:"outlined",label:"Price per stock",onChange:n,value:t,InputProps:{startAdornment:Object(G.jsx)(te.a,{position:"start",children:Object(G.jsx)(it.a,{})})}})},bt=function(e){var t=e.companyName,n=e.handleChange,a=e.setIsDisabled,r=e.currentName,s=e.handleBlur,i=Me(t),o=Object(y.useState)(i),c=Object(Z.a)(o,2),l=c[0],d=c[1],u=Object(B.b)(),j=Object(lt.a)(l,1500),b=Object(Z.a)(j,1)[0];Object(y.useEffect)((function(){""===r&&d("")}),[r]),Object(y.useEffect)((function(){u(Je(b)),a(!1)}),[b]);var m=function(){var e=Object(X.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(!0),d(t.target.value),n(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(G.jsx)("div",{children:Object(G.jsx)(Fe,{id:"company",autoComplete:"off",type:"company",onBlur:s,variant:"outlined",name:"company",label:"Company",onChange:m,value:l,InputProps:{startAdornment:Object(G.jsx)(te.a,{position:"start",children:Object(G.jsx)(ot.a,{})})}})})},mt=Ce.b().shape({company:Ce.d().required("Required field."),amount:Ce.a().required("Required field.").transform((function(e){return parseInt(e)})).integer("Must be a positive integer.").min(1,"Amount must be at least one.")}),ht=function(){var e=at(),t=Object(B.c)((function(e){return e.stock.stockPrice})),n=Object(B.c)((function(e){return e.stock.stockName})),a=Object(ke.a)(be),r=Object(Z.a)(a,2),s=r[0],i=r[1],o=(i.data,i.loading,i.error,Object(y.useState)(!1)),c=Object(Z.a)(o,2),l=c[0],d=c[1],u=Object(B.b)(),j=Object(B.c)((function(e){return e.purchase}));return Object(G.jsx)("div",{children:Object(G.jsx)(ee.a,{initialValues:{company:"",amount:"1",price_per_stock:""},validationSchema:mt,onSubmit:function(e){Object(qe.confirmAlert)({title:"Confirmation",message:"Are you sure you want to purchase ".concat(e.amount," x ").concat(n.toUpperCase()," (").concat((t*parseInt(e.amount)).toFixed(2),"$)?"),buttons:[{label:"Yes",onClick:function(){var t=Object(X.a)(J.a.mark((function t(){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s({variables:{stockName:n.toUpperCase(),amount:parseInt(e.amount)}});case 3:u(Je("")),u({type:"FIRST_PURCHASE"}),q("Success","You purchased: ".concat(e.amount," x ").concat(n.toUpperCase(),"."),"success"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),q("Error",t.t0.message||"Something went wrong.","danger");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()},{label:"No",onClick:function(){q("Canceled","The purchase was canceled.","info")}}]})},children:function(a){var r=a.handleSubmit,s=a.values,i=a.handleChange,o=a.errors,c=a.touched,u=a.handleBlur;return Object(G.jsxs)("form",{onSubmit:r,children:[Object(G.jsx)(bt,{handleChange:i,handleBlur:u,setIsDisabled:function(e){return d(e)},companyName:s.company,currentName:n}),o.company&&c.company?Object(G.jsx)("div",{className:e.errorColor,children:o.company}):null,Object(G.jsx)("p",{}),Object(G.jsx)(Fe,{id:"amount",type:"number",variant:"outlined",label:"Amount",onChange:i,value:s.amount,onBlur:u,InputProps:{startAdornment:Object(G.jsx)(te.a,{position:"start",children:Object(G.jsx)(ct.a,{})}),inputProps:{min:0}}}),o.amount&&c.amount?Object(G.jsx)("div",{className:"errorColor",children:o.amount}):null,Object(G.jsx)("p",{}),Object(G.jsx)(jt,{price:t,handleChange:i}),Object(G.jsx)(ut,{price:t,amount:s.amount}),!j&&n?Object(G.jsx)("div",{children:Object(G.jsxs)(dt.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:[Object(G.jsx)(F.a,{disabled:l,variant:"contained",type:"submit",className:e.buyStockFormButton,children:"Buy"}),Object(G.jsx)(I.a,{className:"animationLastTypography",children:"Press buy and confirm."})]})}):Object(G.jsx)(F.a,{disabled:l,id:"buyStockButton",variant:"contained",type:"submit",className:e.buyStockFormButton,children:"Buy"}),Object(G.jsx)("p",{})]})}})})},pt=n(455),Ot=function(){var e=at(),t=Object(B.c)((function(e){return e.stock.stockName})),n=Object(B.c)((function(e){return e.purchase}));return Object(G.jsxs)("div",{className:e.stockPageFirstDiv,children:[Object(G.jsx)("div",{className:e.stockPageSecondDiv,children:n||t?Object(G.jsx)(G.Fragment,{}):Object(G.jsx)("div",{className:e.stockPageAnimationDiv,children:Object(G.jsxs)(dt.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:[Object(G.jsx)(I.a,{className:e.stockPageAnimationTypography,children:"Write here the symbol & select an amount."}),Object(G.jsx)(pt.a,{size:40})]})})}),Object(G.jsxs)("div",{className:e.mainChartDiv,children:[Object(G.jsx)("div",{className:e.mainChartWidth,children:Object(G.jsx)(st,{stock:t})}),Object(G.jsx)("div",{className:e.buyStocksHigherDiv,children:Object(G.jsx)(ht,{})})]}),Object(G.jsx)("div",{className:e.stockPageLastDiv})]})},ft=n(488),gt=n(442),xt=n(456),vt=n(457),yt=n(458),wt=n(459),kt=n(460),Ct=function(){var e=Object(B.b)(),t=Object(B.c)((function(e){return e.sidebar})),n=W(),a=Object(U.g)(),r=Object(B.c)((function(e){return e.purchase}));return Object(G.jsx)("div",{children:Object(G.jsx)(ft.a,{anchor:"left",open:t,onClose:function(){e(D("DISABLE"))},classes:{paper:n.paper},children:Object(G.jsx)("div",{children:Object(G.jsxs)(gt.a,{children:[Object(G.jsxs)(xt.a,{id:"toMyProfile",button:!0,onClick:function(){return a.push("/myprofile")},children:[Object(G.jsx)(ne.a,{}),Object(G.jsx)(vt.a,{inset:!0,primary:"My profile"})]}),Object(G.jsx)(K.a,{classes:{root:n.divider}}),Object(G.jsxs)(xt.a,{button:!0,onClick:function(){a.push("/actions")},children:[Object(G.jsx)(yt.a,{}),Object(G.jsx)(vt.a,{inset:!0,primary:"Actions"})]}),Object(G.jsx)(K.a,{classes:{root:n.divider}}),Object(G.jsx)(xt.a,{id:"toBuyStocks",button:!0,onClick:function(){return a.push("/buystocks")},children:r?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(wt.a,{style:{paddingTop:3}}),Object(G.jsx)(vt.a,{inset:!0,primary:"Buy stocks"})]}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(dt.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:Object(G.jsx)(wt.a,{style:{paddingTop:3}})}),Object(G.jsx)(dt.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:Object(G.jsx)(vt.a,{inset:!0,primary:"Buy stocks"})})]})}),Object(G.jsx)(K.a,{classes:{root:n.divider}}),Object(G.jsxs)(xt.a,{id:"toExplore",button:!0,onClick:function(){return a.push("/explore")},children:[Object(G.jsx)(kt.a,{}),Object(G.jsx)(vt.a,{inset:!0,primary:"Explore"})]})]})})})})},St=n(494),Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mode:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_MODE":return{mode:!e.mode};default:return e}},Dt=n(462),Tt=n(465),At=n(464),Pt=n(461),Et=n(463),It=n(220),Ft=Object(V.a)({chartLoadingAnimation:{display:"flex",justifyContent:"center",paddingTop:"15px"},tableCellTitles:{color:"white"},oldDataButton:{background:"black",color:"white",width:150},analysisTableButton:{background:"black",color:"white"},myProfileLoadingAnimation:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},myProfileMainDiv:{background:"white",paddingBottom:"60vh",paddingTop:"10vh",margin:"5",display:"flex",flexDirection:"column"},myProfileCardTitle:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"},myProfileCardInfos:{fontSize:15,flex:1,textAlign:"center"},myProfileCardContentDiv:{display:"flex",flexDirection:"row",justifyContent:"space-between"},myProfileCardContentTypography:{fontWeight:"bold",fontSize:30,textAlign:"center"},myProfileCardContentNumberGreen:{color:"green",fontWeight:"bold",fontSize:30,textAlign:"center"},myProfileCardContentNumberRed:{color:"red",fontWeight:"bold",fontSize:30,textAlign:"center"},myProfileButton:{background:"black",color:"white"},modeTitles:{fontWeight:"bold",fontSize:25,color:"black",textAlign:"center",paddingTop:10,paddingBottom:10},myProfileTransationList:{display:"flex",flexDirection:"column",alignItems:"center"},myProfileAnalysisChartDiv:{width:"100%",justifyContent:"center"},myProfileAnalysisSecondDIv:{width:"100%",paddingLeft:"5vh",paddingRight:"5vh"},oldDataDiv:{display:"flex",paddingTop:"5vh",alignItems:"center",justifyContent:"center",flexDirection:"column"},errorColor:{color:"red"},transactionListDiv:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},transactionList:{display:"flex",flexDirection:"row",flexWrap:"wrap"},transactionListItem:{width:"50%",textAlign:"center"},black:{color:"black"},transactionListCollapsedItem:{display:"flex",alignItems:"center",flexDirection:"column"},animationSizes:{height:"0px",width:"0px"},tutorialMainText:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",paddingLeft:"2vh",paddingRight:"2vh"},tutorialArrow:{paddingTop:60,paddingLeft:7},tutorialTypography:{width:200,paddingLeft:7}}),Bt=function(e){var t=e.analysisData,n=e.holdings,a=e.getOldData,r=Ft();return Object(G.jsx)(Pt.a,{component:It.a,children:Object(G.jsxs)(Dt.a,{"aria-label":"customized table",children:[Object(G.jsx)(Et.a,{children:Object(G.jsxs)(Te.a,{style:{background:"black"},children:[Object(G.jsx)(At.a,{className:r.tableCellTitles,align:"right",children:"Company"}),Object(G.jsx)(At.a,{className:r.tableCellTitles,align:"right",children:"Profit"}),Object(G.jsx)(At.a,{className:r.tableCellTitles,align:"right",children:"Average purchase value"}),Object(G.jsx)(At.a,{className:r.tableCellTitles,align:"right",children:"Current value"}),Object(G.jsx)(At.a,{className:r.tableCellTitles,align:"right",children:"Total amount"})]})}),Object(G.jsx)(Tt.a,{children:t.map((function(e){var t=n.filter((function(t){return t.usersStock.stockSymbol===e.name}))[0],s="696969";return t&&(s=(100*(e.sticks[e.sticks.length-1].close/(t.usersTotalOriginalPriceValue/t.usersTotalAmount)-1)).toFixed(2)),e.name&&t&&"696969"!==s?Object(G.jsxs)(Ee,{children:[Object(G.jsx)(At.a,{component:"th",scope:"row",children:Object(G.jsx)(F.a,{id:"openOldData",className:r.analysisTableButton,onClick:function(){try{return void a(e.name)}catch(t){q("Error.",t.message,"danger")}},children:e.name})}),parseFloat(s)>=0?Object(G.jsx)(At.a,{style:{color:"green"},align:"right",children:"".concat(parseFloat(s).toFixed(2),"%")}):Object(G.jsx)(At.a,{align:"right",style:{color:"red"},children:"".concat(parseFloat(s).toFixed(2),"%")}),Object(G.jsx)(At.a,{align:"right",children:(t.usersTotalOriginalPriceValue/t.usersTotalAmount).toFixed(2)}),Object(G.jsx)(At.a,{align:"right",children:e.sticks[e.sticks.length-1].close.toFixed(2)}),Object(G.jsx)(At.a,{align:"right",children:t.usersTotalAmount})]},"".concat(e.name)):Object(G.jsx)(Ee,{},e.name)}))})]})})},Ut=function(e){var t=e.datas,n=e.analysisData,a=e.oldDataError,r=Ft(),s=Object(ke.a)(ue),i=Object(Z.a)(s,1)[0];if(a)return q("API error.",a.message.includes("https://www.alphavantage.co/premium/")?"An error with Alpha Vantage's API: too frequent requests or bad API key.":a.message,"danger"),Object(G.jsx)(G.Fragment,{});if(!t)return Object(G.jsx)("div",{});var o=t.time_series.map((function(e){return e.date})),c=Object(v.a)(Object(v.a)({},Pe),{},{xaxis:{categories:o,type:"datetime",labels:{rotate:0}}}),l=[{name:"Value",data:t.time_series.map((function(e){return e.value.toFixed(2)}))}],d=Ce.b().shape({amount:Ce.a().required("Required field.").transform((function(e){return parseInt(e)})).min(1,"Amount must be at least one.")}),u=n.filter((function(e){return e.name===t.metadata.symbol}))[0];if(!u)return Object(G.jsx)("div",{});var j=u.sticks[u.sticks.length-1].close;return Object(G.jsxs)("div",{className:r.oldDataDiv,children:[Object(G.jsxs)(I.a,{style:{fontSize:20,fontWeight:"bold"},children:["Old data: ",t.metadata.symbol," (last refresh:"," "+t.metadata.lastRefresh,")"]}),Object(G.jsx)("div",{style:{width:"100%"},children:Object(G.jsx)(Ke.a,{options:c,series:l,type:"line",height:300})}),Object(G.jsx)(ee.a,{initialValues:{amount:""},onSubmit:function(e){Object(qe.confirmAlert)({title:"Confirmation",message:"Are you sure you want to sell ".concat(e.amount," x ").concat(t.metadata.symbol.toUpperCase()," \n                        (").concat((j*parseInt(e.amount)).toFixed(2),"$)?"),buttons:[{label:"Yes",onClick:function(){var n=Object(X.a)(J.a.mark((function n(){return J.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i({variables:{stockName:u.name,amount:parseInt(e.amount),price:j}});case 3:q("Success.","You sold: ".concat(e.amount," x ").concat(t.metadata.symbol.toUpperCase(),"."),"success"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),q("An error occured",n.t0.message||"Something went wrong.","danger");case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}()},{label:"No",onClick:function(){q("Canceled","The sale was canceled.","info")}}]})},validationSchema:d,children:function(e){var n=e.handleSubmit,a=e.handleBlur,s=e.values,i=e.handleChange,o=e.errors,c=e.touched;return Object(G.jsxs)("form",{onSubmit:n,children:[Object(G.jsx)("p",{}),Object(G.jsx)(Ie,{id:"amount",type:"number",variant:"outlined",label:"Amount",onChange:i,value:s.amount,style:{width:150},onBlur:a,InputProps:{inputProps:{min:0}}}),o.amount&&c.amount?Object(G.jsx)("div",{className:r.errorColor,children:o.amount}):Object(G.jsx)(G.Fragment,{}),Object(G.jsx)("p",{}),Object(G.jsxs)(I.a,{style:{display:"flex",justifyContent:"center"},children:["Sell ",t.metadata.symbol," for ",j,"$?"]}),Object(G.jsx)("p",{}),Object(G.jsx)(F.a,{variant:"contained",type:"submit",className:r.oldDataButton,children:"Sell"}),Object(G.jsx)("p",{style:{fontSize:20}})]})}})]})},Lt=n(466),_t=function(e){var t,n=e.analysisData,a=e.holdings,r=e.totalOriginalValue,s=e.isTogglable,i=Ft(),o=Object(B.b)(),c=Object(Lt.a)(pe),l=Object(Z.a)(c,2),d=l[0],u=Object.assign({},l[1]),j=Object(B.c)((function(e){return e.mode}));if(n.length<1)return Object(G.jsx)("div",{className:i.chartLoadingAnimation,children:Object(G.jsx)(nt,{type:"spin",color:"black"})});var b=0,m=n[0];n.forEach((function(e){e.sticks.length<b&&(b=(m=e).sticks.length)}));var h=m.sticks.map((function(e){return e.date})),p=[];h.forEach((function(e){var t=0;n.forEach((function(n){var r=n.sticks.filter((function(t){return t.date===e}));if(r.length>0){var s;t+=r[0].close*(null===(s=a.filter((function(e){return e.usersStock.stockSymbol===n.name}))[0])||void 0===s?void 0:s.usersTotalAmount)}else{var i,o=99999,c=n.sticks[0];n.sticks.forEach((function(t){var n=Math.abs(new Date(t.date).getTime()-new Date(e).getTime());n<o&&(o=n,c=t)})),t+=c.close*(null===(i=a.filter((function(e){return e.usersStock.stockSymbol===n.name}))[0])||void 0===i?void 0:i.usersTotalAmount)}})),p=p.concat(parseFloat((100*(t/r-1)).toFixed(2)))}));var O=Object(v.a)(Object(v.a)({},Pe),{},{xaxis:{categories:h,type:Ae,labels:{formatter:function(e){var t=new Date(e);return!1===j.mode?"".concat(t.getDate(),".").concat(t.getMonth()+1,", ").concat(Be(t.getHours()),":").concat(Be(t.getMinutes())):"".concat(t.getDate(),".").concat(t.getMonth()+1)}}},yaxis:{labels:{formatter:function(e){return"".concat(e.toFixed(2),"%")}}}}),f=[{name:"Portfolio value (%)",data:p.map((function(e){return isNaN(e)?0:e}))}];return Object(G.jsxs)("div",{children:[Object(G.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(G.jsx)(I.a,{children:"Last 96 hours"}),Object(G.jsx)(St.a,{color:"default",checked:j.mode,onChange:function(){return o({type:"CHANGE_MODE"})},disabled:s}),Object(G.jsx)(I.a,{children:"Daily since first transaction"})]}),Object(G.jsx)(Ke.a,{options:O,series:f,type:"line",height:300}),Object(G.jsx)(Bt,{getOldData:function(e){try{return void d({variables:{symbol:e}})}catch(t){return void q("Error.",t.message,"danger")}},analysisData:n,holdings:a}),Object(G.jsx)("div",{style:{width:"100%"},children:u.loading?Object(G.jsx)("div",{className:i.chartLoadingAnimation,children:Object(G.jsx)(nt,{type:"spin",color:"black"})}):Object(G.jsx)(Ut,{datas:null===(t=u.data)||void 0===t?void 0:t.stockHistory,analysisData:n,oldDataError:u.error})})]})},$t=n(475),Mt=n(476),Rt=n(477),zt=n(135),qt=n.n(zt),Ht=n(103),Vt=n(467),Wt=n(472),Gt=n(468),Yt=n(469),Kt=n(473),Qt=n(470),Jt=n(471),Xt=function(e){var t=Ft(),n=e.transactions.map((function(e){return e._id.toString()})).reduce((function(e,t){return Object(v.a)(Object(v.a)({},e),{},Object(Ht.a)({},t,!1))}),{}),a=Object(y.useState)(n),r=Object(Z.a)(a,2),s=r[0],i=r[1];return Object(G.jsxs)("div",{className:t.transactionListDiv,children:[Object(G.jsx)("div",{children:Object(G.jsx)(I.a,{className:t.modeTitles,children:e.transactionsWithOwner?"Actions":"Transactions"})}),Object(G.jsx)(gt.a,{className:t.transactionList,component:"nav","aria-labelledby":"nested-list-subheader",children:e.transactions.map((function(n,a){var r=new Date(n.transactionDate),o=r.getDate()+"."+(r.getMonth()+1).toString()+"."+r.getFullYear()+", "+Be(r.getHours())+":"+Be(r.getMinutes());return Object(G.jsxs)("div",{className:t.transactionListItem,children:[Object(G.jsxs)(F.a,{id:"openTransaction",onClick:function(){return e=n._id.toString(),void i((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(Ht.a)({},e,!t[e]))}));var e},children:[Object(G.jsx)(Vt.a,{children:"Buy"===n.transactionType?Object(G.jsx)(Gt.a,{}):Object(G.jsx)(Yt.a,{})}),Object(G.jsx)(vt.a,{primary:"".concat(n.transactionStock.stockSymbol," \n                                        ").concat(e.transactionsWithOwner?"("+e.transactionsWithOwner[a].transactionOwner+")":"")}),s[n._id.toString()]?Object(G.jsx)(Qt.a,{}):Object(G.jsx)(Jt.a,{})]}),Object(G.jsx)(Wt.a,{in:s[n._id.toString()],timeout:"auto",children:Object(G.jsxs)(gt.a,{component:"div",disablePadding:!0,className:t.transactionListCollapsedItem,children:[Object(G.jsxs)(F.a,{disabled:!0,style:{color:"black"},children:[Object(G.jsx)(Vt.a,{children:Object(G.jsx)(Kt.a,{})}),Object(G.jsx)(vt.a,{primary:"Date: ".concat(o)})]}),Object(G.jsxs)(F.a,{disabled:!0,style:{color:"black"},children:[Object(G.jsx)(Vt.a,{children:Object(G.jsx)(Kt.a,{})}),Object(G.jsx)(vt.a,{primary:"Price per share: ".concat(n.transactionStockPrice.toFixed(2))})]}),Object(G.jsxs)(F.a,{disabled:!0,style:{color:"black"},children:[Object(G.jsx)(Vt.a,{children:Object(G.jsx)(Kt.a,{})}),Object(G.jsx)(vt.a,{primary:"Amount: ".concat(n.transactionStockAmount)})]})]})})]},n.transactionDate)}))})]})},Zt=n(474),en=function(){var e=Ft();return Object(G.jsxs)("div",{style:{background:"white"},children:[Object(G.jsx)("div",{className:e.animationSizes,children:Object(G.jsxs)(dt.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:[Object(G.jsx)(Zt.a,{size:50,className:e.tutorialArrow}),Object(G.jsx)(I.a,{className:e.tutorialTypography,children:"Open the sidebar!"})]})}),Object(G.jsx)("div",{className:e.tutorialMainText,children:Object(G.jsx)(I.a,{children:"You have bought no stocks. Follow the instructions and glinting objects in order to buy one."})})]})},tn=function(e){var t,n,a=e.stockSubscription,r=e.followSubscriptions,s=Ft(),i=Object(Qe.a)(ge),o=Object(B.b)(),c=Object(Qe.a)(fe,{variables:{mode:"days"}}),l=Object(Qe.a)(fe,{variables:{mode:"hours"}}),d=Object(y.useState)("Analysis"),u=Object(Z.a)(d,2),j=u[0],b=u[1],m=Object(B.c)((function(e){return e.mode}));if(Object(y.useEffect)((function(){if(a||r)try{i.refetch(),l.refetch(),c.refetch()}catch(e){q("An error occured.","Error while downloading updates and new information.","danger")}}),[a,r]),"This user has no transactions."===(null===(t=c.error)||void 0===t?void 0:t.message)||"This user has no transactions."===(null===(n=l.error)||void 0===n?void 0:n.message))return o({type:"NO_PURCHASES"}),Object(G.jsx)(en,{});if(!i.data||!l.data||!i.data.me||!l.data.currentPortfolioValue)return Object(G.jsx)("div",{className:s.myProfileLoadingAnimation,children:Object(G.jsx)(nt,{type:"spin",color:"black"})});if(i.error||c.error||l.error){var h,p,O,f=(null===(h=i.error)||void 0===h?void 0:h.message)||(null===(p=c.error)||void 0===p?void 0:p.message)||(null===(O=l.error)||void 0===O?void 0:O.message);return q("An error occured.",f,"danger"),Object(G.jsx)("div",{className:s.myProfileLoadingAnimation,children:Object(G.jsx)(nt,{type:"spin",color:"black"})})}if(i.loading||l.loading||!i.data||!l.data)return Object(G.jsx)("div",{className:s.myProfileLoadingAnimation,children:Object(G.jsx)(nt,{type:"spin",color:"black"})});if(0===i.data.me.usersHoldings.length||0===i.data.me.usersTransactions.length)return o({type:"NO_PURCHASES"}),Object(G.jsx)(en,{});0!==i.data.me.usersHoldings.length&&o({type:"FIRST_PURCHASE"});var g=m.mode?c.data.currentPortfolioValue[0]:l.data.currentPortfolioValue[0],x=i.data.me.usersTransactions,v=i.data.me.usersHoldings.reduce((function(e,t){return e+t.usersTotalOriginalPriceValue}),0),w=parseFloat((100*(l.data.currentPortfolioValue[0].wholeValue/v-1)).toString()).toFixed(2);return Object(G.jsxs)("div",{className:s.myProfileMainDiv,children:[Object(G.jsx)("div",{style:{padding:15},children:Object(G.jsxs)($t.a,{children:[Object(G.jsx)(Mt.a,{avatar:Object(G.jsx)(qt.a,{size:100,name:i.data.me.usersUsername,variant:"marble",colors:["#808080","#FFFFFF","#000000"]}),title:Object(G.jsxs)("div",{className:s.myProfileCardTitle,children:[Object(G.jsx)(I.a,{style:{fontSize:30,flex:1},children:i.data.me.usersUsername}),Object(G.jsxs)("div",{style:{flex:1},children:[Object(G.jsx)(I.a,{className:s.myProfileCardInfos,children:i.data.me.followerCount||0}),Object(G.jsx)(I.a,{className:s.myProfileCardInfos,children:"Followers"})]}),Object(G.jsxs)("div",{style:{flex:1},children:[Object(G.jsx)(I.a,{className:s.myProfileCardInfos,children:i.data.me.followingCount||0}),Object(G.jsx)(I.a,{className:s.myProfileCardInfos,children:"Following"})]})]})}),Object(G.jsx)(Rt.a,{children:Object(G.jsxs)("div",{className:s.myProfileCardContentDiv,children:[Object(G.jsxs)("div",{style:{justifyContent:"center"},children:[Object(G.jsx)(I.a,{className:s.myProfileCardContentTypography,children:Math.round(l.data.currentPortfolioValue[0].wholeValue)}),Object(G.jsx)(I.a,{style:{textAlign:"center"},children:"Current value"})]}),Object(G.jsxs)("div",{children:[parseFloat(w)>=0?Object(G.jsxs)(I.a,{className:s.myProfileCardContentNumberGreen,children:[w,"%"]}):Object(G.jsxs)(I.a,{className:s.myProfileCardContentNumberRed,children:[w,"%"]}),Object(G.jsx)(I.a,{style:{textAlign:"center"},children:"Profit percentage"})]}),Object(G.jsxs)("div",{children:[Object(G.jsx)(I.a,{className:s.myProfileCardContentTypography,children:Math.round(v)}),Object(G.jsx)(I.a,{style:{textAlign:"center"},children:"Original value"})]}),Object(G.jsxs)("div",{children:[Math.round(i.data.me.moneyMade)>=0?Object(G.jsx)(I.a,{className:s.myProfileCardContentNumberGreen,children:Math.round(i.data.me.moneyMade)}):Object(G.jsx)(I.a,{className:s.myProfileCardContentNumberRed,children:Math.round(i.data.me.moneyMade)}),Object(G.jsx)(I.a,{style:{textAlign:"center"},children:"Profit"})]})]})})]})}),Object(G.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(G.jsx)("div",{style:{paddingBottom:"1vh",textAlign:"center"},children:Object(G.jsx)(F.a,{variant:"contained",type:"submit",onClick:function(){return b("Analysis")},className:s.myProfileButton,children:"Analysis"})}),Object(G.jsx)("div",{style:{paddingBottom:"1vh",textAlign:"center"},children:Object(G.jsx)(F.a,{variant:"contained",id:"toTransactions",type:"submit",onClick:function(){return b("Transactions")},className:s.myProfileButton,children:"Transactions"})})]}),"Analysis"===j?Object(G.jsx)("div",{children:Object(G.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(G.jsxs)("div",{className:s.myProfileAnalysisSecondDIv,children:[Object(G.jsx)(I.a,{className:s.modeTitles,children:"Analysis"}),Object(G.jsx)("div",{children:Object(G.jsx)("div",{className:s.myProfileAnalysisChartDiv,children:Object(G.jsx)(_t,{totalOriginalValue:v,analysisData:g.analysisValues,holdings:i.data.me.usersHoldings,isTogglable:!c.data})})})]})})}):Object(G.jsx)("div",{className:s.myProfileTransationList,children:Object(G.jsx)(Xt,{transactions:x})})]})},nn=function(){var e=W(),t=Object(B.c)((function(e){return e.user.username}));return Object(G.jsxs)("div",{className:e.defaultPageDiv,children:[Object(G.jsx)(I.a,{className:e.defaultPageTitle,children:t?"You are logged in.":"You are not logged in."}),Object(G.jsx)(I.a,{style:{display:"flex",justifyContent:"center",paddingLeft:"20vw",paddingRight:"20vw"},children:"Welcome to InvShare."})]})},an=Object(V.a)({loadingAnimationDiv:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},specificExploreFirstDiv:{background:"white",paddingBottom:"60vh",paddingTop:"10vh",margin:5,display:"flex",flexDirection:"column"},specificExploreTypography:{fontSize:15,flex:1,textAlign:"center"},cardTitleDiv:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"},cardTypography:{flex:1,fontSize:20},followAmountsDiv:{flex:1,paddingTop:15},cardContentDiv:{display:"flex",flexDirection:"row",justifyContent:"space-around"},cardContentTypography:{fontWeigt:"bold",fontSize:30,textAlign:"center"},transactionListDiv:{fontWeight:"bold",fontSize:30,textAlign:"center"},followButton:{background:"black",color:"white"},autoComplete:{width:"60vw",paddingRight:"1vw",justifyContent:"center",alignItems:"center",display:"flex"},searchField:{border:"2px solid black",borderRadius:7,padding:20},exploreTitle:{fontSize:30,paddingBottom:10},explorePageFirstDiv:{backgroundColor:"white",textAlign:"center",margin:5},explorePageSecondDiv:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"}}),rn=n(43),sn=n(478),on=n(486),cn=function(e){var t,n,a=e.username,r=e.handleChange,s=e.handleBlur,i=e.setFinalUser,o=function(e){if(!Le(e))throw q("Error.","Username must be a string.","danger"),new Error("Username must be a string.");return e}(a),c=an(),l=Object(Lt.a)(he),d=Object(Z.a)(l,2),u=d[0],j=Object.assign({},d[1]),b=Object(lt.a)(o,750),m=Object(Z.a)(b,1)[0],h=Object(y.useState)(void 0===(null===(t=j.data)||void 0===t?void 0:t.searchUser)?[]:null===(n=j.data)||void 0===n?void 0:n.searchUser.map((function(e){return e.usersUsername}))),p=Object(Z.a)(h,2),O=p[0],f=p[1],g=Object(y.useState)(!1),x=Object(Z.a)(g,2),w=x[0],k=x[1],C=w&&0!==O.length;Object(y.useEffect)((function(){""!==m&&u({variables:{username:m}})}),[m]),Object(y.useEffect)((function(){var e;void 0!==(null===(e=j.data)||void 0===e?void 0:e.searchUser)?f(j.data.searchUser.map((function(e){return e.usersUsername}))):f([])}),[j.data]);var S=function(e){r(e)};return Object(y.useEffect)((function(){var e=!0;if(C)return e&&f(Object(rn.a)(O)),function(){e=!1}}),[C]),Object(G.jsx)(on.a,{id:"username",className:c.autoComplete,open:w,onOpen:function(){k(!0)},onClose:function(){k(!1),f([])},getOptionLabel:function(e){return e},options:O,popupIcon:Object(G.jsx)("div",{}),loading:C,autoHighlight:!0,onChange:function(e,t){i(t)},autoSelect:!0,noOptionsText:"No users found",renderInput:function(e){return Object(G.jsx)(Ne.a,Object(v.a)(Object(v.a)({},e),{},{id:"username",name:"username",onBlur:s,onChange:S,className:c.searchField,value:o,InputProps:Object(v.a)(Object(v.a)({},e.InputProps),{},{startAdornment:Object(G.jsx)(te.a,{position:"start",children:Object(G.jsx)(sn.a,{})}),disableUnderline:!0})}))}})},ln=function(){var e=an(),t=Object(y.useState)(""),n=Object(Z.a)(t,2),a=n[0],r=n[1],s=Object(Qe.a)(ce,{variables:{username:a}}).refetch,i=Object(U.g)(),o=function(){var e=Object(X.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.useEffect)((function(){""!==a&&o().then((function(e){1===e.data.searchUser.length?i.push("/explore/".concat(e.data.searchUser[0].usersUsername)):q("Something went wrong.","Your search was not precise enough or no user was found.","info")}))}),[a]),Object(G.jsx)("div",{className:e.explorePageFirstDiv,children:Object(G.jsxs)("div",{className:e.explorePageSecondDiv,children:[Object(G.jsx)(I.a,{className:e.exploreTitle,children:"Explore"}),Object(G.jsx)(ee.a,{initialValues:{username:""},onSubmit:function(e){r(e.username)},children:function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,s=e.handleSubmit;return Object(G.jsx)("form",{onSubmit:s,children:Object(G.jsx)(cn,{handleChange:n,handleBlur:a,username:t.username,handleSubmit:s,setFinalUser:r})})}})]})})},dn=n(155),un=function(e){var t=e.followSubscriptions,n=an(),a=Object(U.i)(),r=Object(Qe.a)(ce,{variables:{username:a.id}}),s=Object(ke.a)(le,{variables:{username:a.id}}),i=Object(dn.a)(s),o=i[0],c=i.slice(1),l=Object(B.c)((function(e){return e.user.username})),d=Object(ke.a)(je,{variables:{username:a.id}}),u=Object(dn.a)(d),j=u[0],b=u.slice(1);if(Object(y.useEffect)((function(){if(t)try{r.refetch()}catch(e){q("Error.","Something went wrong while trying to update the page.","danger")}}),[t]),r.loading)return Object(G.jsx)("div",{className:n.loadingAnimationDiv,children:Object(G.jsx)(nt,{type:"spin",color:"black"})});var m=function(){var e=Object(X.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:q("Success","You followed ".concat(a.id,"."),"success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),q("Error.",(null===(t=c[0].error)||void 0===t?void 0:t.graphQLErrors[0].message)||"An error occured.","danger");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(X.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j();case 3:q("Success","You unfollowed ".concat(a.id,"."),"success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),q("Error.",(null===(t=b[0].error)||void 0===t?void 0:t.graphQLErrors[0].message)||"An error occured.","danger");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)("div",{className:n.specificExploreFirstDiv,children:[Object(G.jsx)("div",{style:{padding:15},children:Object(G.jsxs)($t.a,{children:[Object(G.jsx)(Mt.a,{avatar:Object(G.jsx)(qt.a,{size:100,name:r.data.searchUser[0].usersUsername,variant:"marble",colors:["#808080","#FFFFFF","#000000"]}),title:Object(G.jsxs)("div",{className:n.cardTitleDiv,children:[Object(G.jsxs)("div",{style:{flex:2},children:[Object(G.jsx)(I.a,{className:n.cardTypography,children:r.data.searchUser[0].usersUsername}),Object(G.jsx)(I.a,{className:n.cardTypography,children:r.data.searchUser[0].usersFollowers.filter((function(e){return e.user.usersUsername===l})).length>0?Object(G.jsx)(F.a,{className:n.followButton,onClick:h,children:"Unfollow"}):Object(G.jsx)(F.a,{className:n.followButton,onClick:m,children:"Follow"})})]}),Object(G.jsxs)("div",{className:n.followAmountsDiv,children:[Object(G.jsx)(I.a,{className:n.specificExploreTypography,children:r.data.searchUser[0].followerCount||0}),Object(G.jsx)(I.a,{className:n.specificExploreTypography,children:"Followers"})]}),Object(G.jsxs)("div",{className:n.followAmountsDiv,children:[Object(G.jsx)(I.a,{className:n.specificExploreTypography,children:r.data.searchUser[0].followingCount||0}),Object(G.jsx)(I.a,{className:n.specificExploreTypography,children:"Following"})]})]})}),Object(G.jsx)(Rt.a,{children:Object(G.jsx)("div",{className:n.cardContentDiv,children:Object(G.jsxs)("div",{style:{justifyContent:"center"},children:[Object(G.jsx)(I.a,{className:n.cardContentTypography,children:(r.data.searchUser[0].moneyMade||0).toFixed(2)}),Object(G.jsx)(I.a,{style:{textAlign:"center"},children:"Money made"})]})})})]})}),Object(G.jsx)("div",{className:n.transactionListDiv,children:Object(G.jsx)(Xt,{transactions:r.data.searchUser[0].usersTransactions||0})})]})},jn=n(491),bn=Object(V.a)({noActionsTypography:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"50vh"},noActionsDiv:{background:"white",paddingBottom:"60vh",paddingTop:"15vh",margin:5},loadingAnimation:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},transactionListDiv:{background:"white",paddingBottom:"60vh",paddingTop:"15vh",margin:5}}),mn=function(){var e=bn(),t=Object(Qe.a)(Oe);if(t.loading)return Object(G.jsx)("div",{className:e.loadingAnimation,children:Object(G.jsx)(nt,{type:"spin",color:"black"})});var n=t.data.getActions.map((function(e){return e.transaction}));return 0===n.length?Object(G.jsx)("div",{className:e.noActionsDiv,children:Object(G.jsx)(I.a,{className:e.noActionsTypography,children:"No actions yet. Follow someone or tell the users you follow to buy and sell stocks."})}):Object(G.jsx)("div",{className:e.transactionListDiv,children:Object(G.jsx)(Xt,{transactions:n,transactionsWithOwner:t.data.getActions})})},hn=n(214),pn=n.n(hn),On=function(){var e=w.a.useState("loading"),t=Object(Z.a)(e,2),n=t[0],a=t[1];return pn.a.post("http://localhost:3001/graphql",{query:"\n        mutation resetDatabase {\n        resetDatabase {\n            result\n        }\n    }\n    "},{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data.data.resetDatabase.result?a("success"):e.data.data.resetDatabase.result||a("not allowed"),n})),"success"===n?Object(G.jsx)("div",{children:"Success!"}):"not allowed"===n?Object(G.jsx)("div",{children:"Not allowed!"}):Object(G.jsx)("div",{children:"Loading..."})},fn=function(){return Object(G.jsx)("div",{children:"Up."})};var gn=function(){var e,t,n,a,r,s,i,o,c,l=Object(B.c)((function(e){return e.user.username})),d=Object(jn.a)(ve,{variables:{username:l}}),u=Object(jn.a)(ye,{variables:{username:l}}),j={trans:null===(e=d.data)||void 0===e||null===(t=e.stockEvent)||void 0===t?void 0:t.transaction,me:null===(n=d.data)||void 0===n?void 0:n.stockEvent.me};return Object(G.jsxs)("div",{children:[Object(G.jsx)(z.a,{}),Object(G.jsx)(L.a,{children:Object(G.jsxs)(U.d,{children:[Object(G.jsx)(U.b,{path:"/actions",exact:!0,children:Object(G.jsxs)("div",{children:[Object(G.jsx)(Ct,{}),Object(G.jsx)(Y,{stockSubscription:j}),Object(G.jsx)(mn,{})]})}),Object(G.jsx)(U.b,{path:"/login",exact:!0,children:Object(G.jsxs)("div",{children:[Object(G.jsx)(Ct,{}),Object(G.jsx)(Y,{stockSubscription:j}),Object(G.jsx)(We,{})]})}),Object(G.jsx)(U.b,{path:"/myprofile",exact:!0,children:l?Object(G.jsxs)("div",{children:[Object(G.jsx)(Ct,{}),Object(G.jsx)(Y,{stockSubscription:j}),Object(G.jsx)(tn,{stockSubscription:null===(a=d.data)||void 0===a||null===(r=a.stockEvent)||void 0===r?void 0:r.transaction.transactionDate,followSubscriptions:null===(s=u.data)||void 0===s||null===(i=s.followEvent)||void 0===i?void 0:i.date})]}):Object(G.jsx)(U.a,{to:"/login"})}),Object(G.jsx)(U.b,{path:"/buystocks",exact:!0,children:l?Object(G.jsxs)("div",{children:[Object(G.jsx)(Ct,{}),Object(G.jsx)(Y,{stockSubscription:j}),Object(G.jsx)(Ot,{})]}):Object(G.jsx)(U.a,{to:"/login"})}),Object(G.jsxs)(U.b,{path:"/login",exact:!0,children:[Object(G.jsxs)("div",{children:[Object(G.jsx)(Ct,{}),Object(G.jsx)(Y,{stockSubscription:j})]}),Object(G.jsx)(We,{})]}),Object(G.jsxs)(U.b,{path:"/explore",exact:!0,children:[Object(G.jsxs)("div",{children:[Object(G.jsx)(Ct,{}),Object(G.jsx)(Y,{stockSubscription:j})]}),Object(G.jsx)(ln,{})]}),Object(G.jsx)(U.b,{path:"/explore/:id",exact:!0,children:Object(G.jsxs)("div",{children:[Object(G.jsx)(Ct,{}),Object(G.jsx)(Y,{stockSubscription:j}),Object(G.jsx)(un,{followSubscriptions:null===(o=u.data)||void 0===o||null===(c=o.followEvent)||void 0===c?void 0:c.date})]})}),Object(G.jsx)(U.b,{path:"/",exact:!0,children:Object(G.jsxs)("div",{children:[Object(G.jsx)(Ct,{}),Object(G.jsx)(Y,{stockSubscription:j}),Object(G.jsx)(nn,{})]})}),Object(G.jsx)(U.b,{path:"/resetdatabase",exact:!0,children:Object(G.jsx)(On,{})}),Object(G.jsx)(U.b,{path:"/healthcheck",exact:!0,children:Object(G.jsx)(fn,{})}),Object(G.jsx)(U.b,{path:"/",children:Object(G.jsx)(U.a,{to:"/"})})]})})]})},xn=n(158),vn=n(484),yn=n(479),wn=n(482),kn=n(485),Cn=n(480),Sn=n(79),Nn=n(217),Dn=n(215),Tn=Object(xn.a)({user:$,sidebar:T,stock:Ze,mode:Nt,purchase:M,notification:H}),An=new vn.a({uri:"https://fso2021practicework.herokuapp.com/graphql"}),Pn=new Dn.a({uri:"wss://fso2021practicework.herokuapp.com/subscriptions",options:{reconnect:!0}}),En=Object(xn.b)(Tn),In=Object(Nn.a)((function(e,t){var n=t.headers,a=localStorage.getItem("usersToken");return{headers:Object(v.a)(Object(v.a)({},n),{},{authorization:a?"bearer ".concat(a):null})}})),Fn=Object(yn.a)((function(e){var t=e.query,n=Object(Sn.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),Pn,In.concat(An)),Bn=new wn.a({cache:new kn.a,link:Fn});C.a.render(Object(G.jsx)(B.a,{store:En,children:Object(G.jsx)(Cn.a,{client:Bn,children:Object(G.jsx)(gn,{})})}),document.getElementById("root"))}},[[394,1,2]]]);
//# sourceMappingURL=main.3c45136d.chunk.js.map