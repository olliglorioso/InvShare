(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{369:function(e,t,n){"use strict";n.r(t);var a,r,s,i,o,c,l,d,u,j,b,m,h,p,O,f,g,x=n(20),v=n(0),y=n(18),w=n.n(y),k=n(194),C=n.n(k),S=function(e){return{type:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENABLE":return!0;case"DISABLE":return!1;default:return e}},T=n(411),A=n(412),D=n(413),P=n(67),E=n(414),I=n(15),F=n(25),B=n(61),U=n(410),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:localStorage.getItem("loggedUser")?localStorage.getItem("loggedUser"):""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return localStorage.setItem("usersToken",t.token),localStorage.setItem("loggedUser",t.username),{username:t.username};case"LOGOUT":return localStorage.removeItem("usersToken"),localStorage.removeItem("loggedUser"),{username:""};default:return e}},L=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NO_PURCHASES":return!1;case"FIRST_PURCHASE":return!0;default:return e}},R=n(117),M=n.n(R),$=(n(244),function(e,t,n){R.store.addNotification({title:e,message:t,type:n,insert:"top",container:"top-right",animationIn:["animate__animated","animate__fadeIn"],animationOut:["animate__animated","animate__fadeOut"],dismiss:{duration:5e3,onScreen:!0}})}),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notification:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return{notification:t.notification};default:return e}},z=n(407),q=Object(z.a)((function(e){return{invShareLink:{color:"white",textDecoration:"none",fontSize:20},menuButton:{marginRight:e.spacing(2)},appBarTitle:{flexGrow:1,textAlign:"center"},loginLink:{color:"white",textDecoration:"none"},defaultPageTitle:{display:"flex",justifyContent:"center",fontSize:30,fontWeight:"bold",paddingBottom:10},defaultPageDiv:{background:"white",paddingBottom:"60vh",paddingTop:"15vh",margin:5,display:"flex",flexDirection:"column"},paper:{background:"black",color:"white"},divider:{background:"white",height:3}}})),V=n(1),W=function(e){var t=e.stockSubscription,n=q(),a=Object(I.b)(),r=Object(F.h)(),s=Object(I.c)((function(e){return e.user.username})),i=Object(I.c)((function(e){return e.notification})),o=Object(U.a)(),c=Object(F.g)();Object(v.useEffect)((function(){if(t.trans&&t.me!==s&&i.notification!==t.trans.transactionDate){a({type:"SET_NOTIFICATION",notification:t.trans.transactionDate});var e="".concat(t.me," purchased ").concat(t.trans.transactionStockAmount," x ").concat(t.trans.transactionStock.stockSymbol," for ").concat(t.trans.transactionStockPrice),n="Buy"===t.trans.transactionType?e:e.replace("purchased","sold");$("Notification",n,"info")}}),[t]);return Object(V.jsx)("div",{children:Object(V.jsx)(T.a,{style:{background:"black"},children:Object(V.jsxs)(A.a,{children:[Object(V.jsx)("div",{children:s?Object(V.jsx)(D.a,{id:"sideBarButton",onClick:function(){return a(S("ENABLE"))},edge:"start",className:n.menuButton,color:"inherit","aria-label":"menu",children:Object(V.jsx)(C.a,{})}):Object(V.jsx)("div",{})}),Object(V.jsx)(P.a,{className:n.appBarTitle,variant:"h6",children:Object(V.jsx)(E.a,{children:Object(V.jsx)(B.b,{to:"/",className:n.invShareLink,children:"InvShare"})})}),"/login"===r.pathname||s?Object(V.jsx)("div",{}):Object(V.jsx)(E.a,{id:"loginButton",color:"inherit",children:Object(V.jsx)(B.b,{to:"/login",className:n.loginLink,children:"Log in"})}),s?Object(V.jsx)(E.a,{onClick:function(){return function(){try{localStorage.clear(),o.clearStore(),a({type:"LOGOUT"}),a({type:"FIRST_PURCHASE"}),c.push("/")}catch(e){$("An error occured.","Error while logging out.","danger")}}()},style:{color:"white"},children:"Log out"}):Object(V.jsx)("div",{})]})})})},G=n(425),Y=n(23),K=n.n(Y),Q=n(39),J=n(19),X=n(54),Z=n(422),ee=n(423),te=n(424),ne=n(31),ae=n(458),re=Object(ae.a)(a||(a=Object(ne.a)(["\n  fragment StockDetails on IndividualStock {\n    close\n    date\n    high\n    low\n    open\n    volume\n  }\n"]))),se=Object(ae.a)(r||(r=Object(ne.a)(["\n  fragment TransactionDetails on Transaction {\n    transactionDate\n    transactionStock {\n      stockSymbol\n      stockTotalAmount\n    }\n    transactionStockAmount\n    transactionStockPrice\n    transactionType\n    _id\n  }\n"]))),ie=Object(ae.a)(s||(s=Object(ne.a)(["\n  query searchUser($username: String!) {\n    searchUser(username: $username) {\n      usersUsername\n      usersFollowers {\n        user {\n          usersUsername\n        }\n      }\n      usersHoldings {\n        usersStock {\n          stockTotalAmount\n          stockSymbol\n        }\n        usersTotalAmount\n        usersTotalOriginalPriceValue\n      }\n      usersTransactions {\n        ...TransactionDetails\n      }\n      moneyMade\n      followerCount\n      followingCount\n    }\n  }\n  ","\n"])),se),oe=Object(ae.a)(i||(i=Object(ne.a)(["\n  mutation follow($username: String!) {\n    followUser(username: $username) {\n      result\n    }\n  }\n"]))),ce=Object(ae.a)(o||(o=Object(ne.a)(["\n  mutation addUser($username: String!, $password: String!) {\n    addUser(username: $username, password: $password) {\n      usersUsername\n    }\n  }\n"]))),le=Object(ae.a)(c||(c=Object(ne.a)(["\n  mutation sellStock($stockName: String!, $amount: Int!, $price: Float!) {\n    sellStock(stockName: $stockName, amount: $amount, price: $price) {\n      ...TransactionDetails\n    }\n  }\n  ","\n"])),se),de=Object(ae.a)(l||(l=Object(ne.a)(["\n  mutation unfollowUser($username: String!) {\n    unfollowUser(username: $username) {\n      result\n    }\n  }\n"]))),ue=Object(ae.a)(d||(d=Object(ne.a)(["\n  mutation buyStock($stockName: String!, $amount: Int!) {\n    buyStock(stockName: $stockName, amount: $amount) {\n      ...TransactionDetails\n    }\n  }\n  ","\n"])),se),je=Object(ae.a)(u||(u=Object(ne.a)(["\n  mutation login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      value\n      username\n    }\n  }\n"]))),be=Object(ae.a)(j||(j=Object(ne.a)(["\n  query searchUser($username: String!) {\n    searchUser(username: $username) {\n      usersUsername\n    }\n  }\n"]))),me=Object(ae.a)(b||(b=Object(ne.a)(["\n  query stockHistory($symbol: String!) {\n    stockHistory(symbol: $symbol) {\n      time_series {\n        date\n        value\n      }\n      metadata {\n        information\n        symbol\n        lastRefresh\n      }\n    }\n  }\n"]))),he=Object(ae.a)(m||(m=Object(ne.a)(["\n  query GetActions {\n    getActions {\n      transaction {\n        ...TransactionDetails\n      }\n      transactionOwner\n    }\n  }\n  ","\n"])),se),pe=Object(ae.a)(h||(h=Object(ne.a)(["\n  query cpv($mode: String!) {\n    currentPortfolioValue(mode: $mode) {\n      wholeValue\n      analysisValues {\n        name\n        sticks {\n          ...StockDetails\n        }\n      }\n    }\n  }\n  ","\n"])),re),Oe=Object(ae.a)(p||(p=Object(ne.a)(["\n  query {\n    me {\n      usersUsername\n      usersHoldings {\n        usersStock {\n          stockTotalAmount\n          stockSymbol\n        }\n        usersTotalAmount\n        usersTotalOriginalPriceValue\n      }\n      usersTransactions {\n        ...TransactionDetails\n      }\n      moneyMade\n      followerCount\n      followingCount\n    }\n  }\n  ","\n"])),se),fe=Object(ae.a)(O||(O=Object(ne.a)(["\n  query individualStock($company: String!) {\n    individualStock(company: $company) {\n      ...StockDetails\n    }\n  }\n  ","\n"])),re),ge=Object(ae.a)(f||(f=Object(ne.a)(["\n  subscription StockEvent ($username: String) {\n    stockEvent (username: $username){\n      transaction {\n        ...TransactionDetails\n      }\n      me\n    }\n  }\n  ","\n"])),se),xe=Object(ae.a)(g||(g=Object(ne.a)(["\n  subscription followEvent ($username: String){\n    followEvent (username: $username) {\n      auteur\n      object\n      followType\n      date\n    }\n  }\n"]))),ve=ce,ye=n(465),we=n(33),ke=n(370),Ce=n(456),Se=n(467),Ne=n(415),Te="category",Ae={chart:{id:"b\xf6rse",fontFamily:"Roboto",background:"FFFFFF",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!1,selection:!1,zoom:'<img src="https://image.flaticon.com/icons/png/512/1086/1086933.png" style="padding-top: 3px;" width="22">',zoomin:!1,zoomout:!1,pan:'<img src="https://image.flaticon.com/icons/png/512/1/1427.png" width="30">',reset:'<img src="https://image.flaticon.com/icons/png/512/32/32303.png" width="22" style="padding-top: 3px;">'},autoSelected:"zoom"}},colors:["#000000","#000000"],stroke:{width:1}},De=Object(Se.a)(Ne.a)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),Pe=Object(ke.a)({root:{"& label.Mui-focused":{color:"grey"},"& .MuiInput-underline:after":{borderBottomColor:"black"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"grey"},"&:hover fieldset":{borderColor:"grey"},"&.Mui-focused fieldset":{borderColor:"black"}}}})(Ce.a),Ee=Object(ke.a)({root:{"& label.Mui-focused":{color:"grey"},"& .MuiInput-underline:after":{borderBottomColor:"black"},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"grey"},"&:hover fieldset":{borderColor:"grey"},"&.Mui-focused fieldset":{borderColor:"black"}},width:"20vw"}})(Ce.a),Ie=function(e){return e<10?"0"+e.toString():e.toString()},Fe=Object(z.a)({errorColor:{color:"red"},loginButton:{background:"black",color:"white",width:255},loginPageFirstDiv:{background:"white",paddingBottom:"60vh",paddingTop:"15vh",margin:"5",display:"flex",flexDirection:"column"},loginPageDivs:{display:"flex",justifyContent:"center"},loginDivider:{width:"90%",color:"grey",height:2}}),Be=function(e){return"string"===typeof e||e instanceof String},Ue=function(e){return e instanceof Number||"number"===typeof e},_e=function(e){if(!e||!e.username||!e.password||!Be(e.username)||!Be(e.password))throw $("Error.","Incorrect type of username or password","danger"),new Error("Incorrect type of username or password.");if(e.username.length<4)throw $("Error.","Username must be at least 4 characters long.","danger"),new Error("Username too short.");if(e.password.length<8)throw $("Error.","Password must be at most 8 characters long.","danger"),new Error("Password too short.");return e},Le=function(e){if(Be(e))return e;throw $("Error.","Company is not a string.","danger"),new Error("Company is not a string.")},Re=we.b().shape({username:we.d().required("Required field.").min(4,"Must be at least 4 characters."),password:we.d().required("Required field.").min(8,"Must be at least 8 characters.")}),Me=function(){var e=Fe(),t=Object(ye.a)(je),n=Object(J.a)(t,2),a=n[0],r=n[1],s=Object(I.b)(),i=Object(F.g)();Object(v.useEffect)((function(){try{s((e=r.data.login.value,t=r.data.login.username,{type:"LOGIN",token:e,username:t})),i.push("/")}catch(n){return}var e,t}),[r.data]);return Object(V.jsx)(X.a,{initialValues:{username:"",password:""},onSubmit:function(){var e=Object(Q.a)(K.a.mark((function e(t){var n,r,s;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,s=_e({username:n,password:r}),e.prev=2,e.next=5,a({variables:{username:s.username,password:s.password}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),$("Failed.",e.t0.message,"danger");case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}(),validationSchema:Re,children:function(t){var n=t.handleSubmit,a=t.values,r=t.errors,s=t.handleChange,i=t.handleBlur,o=t.touched;return Object(V.jsxs)("form",{onSubmit:n,children:[Object(V.jsx)("p",{}),Object(V.jsx)(Pe,{id:"username",type:"username",variant:"outlined",label:"Username",onChange:s,onBlur:i,value:a.username,InputProps:{startAdornment:Object(V.jsx)(Z.a,{position:"start",children:Object(V.jsx)(ee.a,{})})}}),r.username&&o.username?Object(V.jsx)("div",{className:e.errorColor,children:r.username}):null,Object(V.jsx)("p",{}),Object(V.jsx)(Pe,{id:"password",type:"password",variant:"outlined",label:"Password",onChange:s,onBlur:i,value:a.password,InputProps:{startAdornment:Object(V.jsx)(Z.a,{position:"start",children:Object(V.jsx)(te.a,{})})}}),r.password&&o.password?Object(V.jsx)("div",{className:e.errorColor,children:r.password}):null,Object(V.jsx)("p",{}),Object(V.jsx)(E.a,{id:"tryToLoginButton",variant:"contained",type:"submit",className:e.loginButton,children:"Log in"}),Object(V.jsx)("p",{style:{fontSize:20}})]})}})},$e=n(89),He=(n(146),we.b().shape({username:we.d().min(4,"Username must be at least 4 characters.").max(15,"Username must be 15 characters or less.").required("Username is required."),password:we.d().min(8,"Password must be at least 8 characters.").max(15,"Password must be 15 characters or less.").required("Password is required."),password_again:we.d().oneOf([we.c("password"),null],"Passwords must match.").required("Password confirmation is required.")})),ze=function(){var e=Fe(),t=Object(ye.a)(ve),n=Object(J.a)(t,1)[0];return Object(V.jsx)(X.a,{initialValues:{username:"",password:"",password_again:""},validationSchema:He,onSubmit:function(e){Object($e.confirmAlert)({title:"Confirmation",message:"Create an account with the name ".concat(e.username,"?"),buttons:[{label:"Yes",onClick:function(){var t=Object(Q.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({variables:{username:e.username,password:e.password}});case 3:$("Success.","You created an account with the name ".concat(e.username,"."),"success"),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),$("Error.",t.t0.message||"Something went wrong.","danger"),t.t0.message.includes("password")?e.password="":t.t0.message.includes("username")&&(e.username="");case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}()},{label:"No",onClick:function(){$("Canceled","You didn't create a new account.","info")}}]})},children:function(t){var n=t.values,a=t.handleChange,r=t.handleSubmit,s=t.errors,i=t.touched,o=t.handleBlur;return Object(V.jsxs)("form",{onSubmit:r,children:[Object(V.jsx)(Pe,{id:"username2",label:"Username",name:"username",type:"text",variant:"outlined",onChange:a,value:n.username,onBlur:o,InputProps:{startAdornment:Object(V.jsx)(Z.a,{position:"start",children:Object(V.jsx)(ee.a,{})})}}),s.username&&i.username?Object(V.jsx)("div",{className:e.errorColor,children:s.username}):null,Object(V.jsx)("p",{}),Object(V.jsx)(Pe,{id:"password2",label:"Password",name:"password",type:"password",variant:"outlined",onChange:a,value:n.password,onBlur:o,InputProps:{startAdornment:Object(V.jsx)(Z.a,{position:"start",children:Object(V.jsx)(te.a,{})})}}),s.password&&i.password?Object(V.jsx)("div",{className:e.errorColor,children:s.password}):null,Object(V.jsx)("p",{}),Object(V.jsx)(Pe,{id:"password_again",label:"Password again",name:"password_again",type:"password",variant:"outlined",onChange:a,value:n.password_again,onBlur:o,InputProps:{startAdornment:Object(V.jsx)(Z.a,{position:"start",children:Object(V.jsx)(te.a,{})})}}),s.password_again&&i.password_again?Object(V.jsx)("div",{className:e.errorColor,children:s.password_again}):null,Object(V.jsx)("p",{}),Object(V.jsx)(E.a,{type:"submit",variant:"contained",color:"primary",className:e.loginButton,children:"Sign up"})]})}})},qe=function(){var e=Fe();return Object(V.jsx)("div",{className:e.loginPageFirstDiv,children:Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{className:e.loginPageDivs,children:Object(V.jsx)(P.a,{variant:"h5",children:"Log in"})}),Object(V.jsx)("p",{}),Object(V.jsx)("div",{className:e.loginPageDivs,children:Object(V.jsx)(Me,{})}),Object(V.jsx)("p",{}),Object(V.jsxs)("div",{className:e.loginPageDivs,children:[Object(V.jsx)("p",{}),Object(V.jsx)(G.a,{className:e.loginDivider})]}),Object(V.jsx)("div",{className:e.loginPageDivs,children:Object(V.jsx)(P.a,{variant:"h5",children:"Sign up"})}),Object(V.jsx)("p",{}),Object(V.jsx)("div",{className:e.loginPageDivs,children:Object(V.jsx)(ze,{})})]})})},Ve=n(206),We=n(90),Ge=n.n(We),Ye=n(426),Ke=function(e){return{type:"CHANGE_STOCK",stock:e,price:0}},Qe=function(e){return{type:"CHANGE_PRICE",stock:"moikka",price:e}},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stockName:"",stockPrice:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_STOCK":return Object(x.a)(Object(x.a)({},e),{},{stockName:t.stock});case"CHANGE_PRICE":return Object(x.a)(Object(x.a)({},e),{},{stockPrice:t.price});default:return e}},Xe=n(201),Ze=n.n(Xe),et=function(e){var t=e.type,n=e.color;return Object(V.jsx)(Ze.a,{type:t,color:n,height:"10%",width:"10%"})},tt=Object(z.a)({finalInformationTypography:{paddingTop:5,paddingBottom:5},animationLastTypography:{fontSize:15,paddingTop:4},errorColor:{color:"red"},loadingAnimationDiv:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},chartError:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",color:"red"},stockPageFirstDiv:{backgroundColor:"white",textAlign:"center",paddingTop:"20vh",paddingBottom:"20vh",margin:5},stockPageSecondDiv:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},stockPageAnimationDiv:{height:0,paddingBottom:55,paddingRight:"10vw"},stockPageAnimationTypography:{width:160,fontSize:15},buyStockFormButton:{width:"20vw",background:"black",color:"white"},stockPageLastDiv:{display:"flex",flexDirection:"row",justifyContent:"end",paddingRIght:"2"},mainChartWidth:{width:"100%"},mainChartDiv:{display:"flex",flexDirection:"row"},buyStocksHigherDiv:{paddingTop:40,width:"20vw",paddingRight:5}}),nt=["data","loading"],at=function(e){var t=tt(),n=Le(e.stock),a=Object(Ye.a)(fe,{variables:{company:n}}),r=a.data,s=a.loading,i=Object(Ve.a)(a,nt),o=Object(I.b)(),c=[];r&&(c=r.individualStock.map((function(e){return{close:e.close,date:e.date}}))),Object(v.useEffect)((function(){c&&void 0!==c[c.length-1]&&o(Qe(c[c.length-1].close)),c&&0===c.length&&o(Qe(0))}),[r]);var l=Object(x.a)(Object(x.a)({},Ae),{},{xaxis:{categories:c.map((function(e){return e.date})),type:Te,labels:{formatter:function(e){var t=new Date(e);return"".concat(t.getDate(),".").concat(t.getMonth(),", ").concat(Ie(t.getHours()),":").concat(Ie(t.getMinutes()))}}}}),d=[{name:e.stock.toUpperCase(),data:c.map((function(e){return e.close.toFixed(2)}))||[0]}];return Object(V.jsxs)("div",{children:[Object(V.jsx)(P.a,{children:"Last 96 hours"}),s?Object(V.jsx)("div",{className:t.loadingAnimationDiv,children:Object(V.jsx)(et,{type:"spin",color:"black"})}):i.error&&"Incorrect or missing symbol."!==i.error.graphQLErrors[0].message?Object(V.jsx)("div",{className:t.chartError,children:i.error.graphQLErrors[0].message}):Object(V.jsx)(Ge.a,{options:l,series:d,type:"line",height:300})]})},rt=n(427),st=n(428),it=n(429),ot=n(468),ct=n(62),lt=function(e){var t=e.price,n=e.amount,a=function(e){if(Ue(e))return e;if(Be(e))return parseFloat(e);throw $("Error.","Price is neither a number nor a string.","danger"),new Error("Could not parse price")}(t),r=function(e){if(Ue(e))return e.toString();if(Be(e))return e;throw $("Error.","Amount is neither a number nor a string.","danger"),new Error("Amount is neither a number nor a string.")}(n),s="Total: 0.00";return 0!==a&&"0"!==r&&""!==r&&(s="Total: ".concat((a*parseFloat(r)).toFixed(2),"$")),Object(V.jsx)(P.a,{className:"finalInformationTypography",children:s})},dt=function(e){var t=e.price,n=e.handleChange;return Object(V.jsx)(Ee,{id:"price_per_stock",type:"price_per_stock",variant:"outlined",label:"Price per stock",onChange:n,value:t,InputProps:{startAdornment:Object(V.jsx)(Z.a,{position:"start",children:Object(V.jsx)(rt.a,{})})}})},ut=function(e){var t=e.companyName,n=e.handleChange,a=e.setIsDisabled,r=e.currentName,s=e.handleBlur,i=Le(t),o=Object(v.useState)(i),c=Object(J.a)(o,2),l=c[0],d=c[1],u=Object(I.b)(),j=Object(ot.a)(l,1500),b=Object(J.a)(j,1)[0];Object(v.useEffect)((function(){""===r&&d("")}),[r]),Object(v.useEffect)((function(){u(Ke(b)),a(!1)}),[b]);var m=function(){var e=Object(Q.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(!0),d(t.target.value),n(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsx)("div",{children:Object(V.jsx)(Ee,{id:"company",autoComplete:"off",type:"company",onBlur:s,variant:"outlined",name:"company",label:"Company",onChange:m,value:l,InputProps:{startAdornment:Object(V.jsx)(Z.a,{position:"start",children:Object(V.jsx)(st.a,{})})}})})},jt=we.b().shape({company:we.d().required("Required field."),amount:we.a().required("Required field.").transform((function(e){return parseInt(e)})).integer("Must be a positive integer.").min(1,"Amount must be at least one.")}),bt=function(){var e=tt(),t=Object(I.c)((function(e){return e.stock.stockPrice})),n=Object(I.c)((function(e){return e.stock.stockName})),a=Object(ye.a)(ue),r=Object(J.a)(a,2),s=r[0],i=r[1],o=(i.data,i.loading,i.error,Object(v.useState)(!1)),c=Object(J.a)(o,2),l=c[0],d=c[1],u=Object(I.b)(),j=Object(I.c)((function(e){return e.purchase}));return Object(V.jsx)("div",{children:Object(V.jsx)(X.a,{initialValues:{company:"",amount:"1",price_per_stock:""},validationSchema:jt,onSubmit:function(e){Object($e.confirmAlert)({title:"Confirmation",message:"Are you sure you want to purchase ".concat(e.amount," x ").concat(n.toUpperCase()," (").concat((t*parseInt(e.amount)).toFixed(2),"$)?"),buttons:[{label:"Yes",onClick:function(){var t=Object(Q.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s({variables:{stockName:n.toUpperCase(),amount:parseInt(e.amount)}});case 3:u(Ke("")),u({type:"FIRST_PURCHASE"}),$("Success","You purchased: ".concat(e.amount," x ").concat(n.toUpperCase(),"."),"success"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),$("Error",t.t0.message||"Something went wrong.","danger");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()},{label:"No",onClick:function(){$("Canceled","The purchase was canceled.","info")}}]})},children:function(a){var r=a.handleSubmit,s=a.values,i=a.handleChange,o=a.errors,c=a.touched,u=a.handleBlur;return Object(V.jsxs)("form",{onSubmit:r,children:[Object(V.jsx)(ut,{handleChange:i,handleBlur:u,setIsDisabled:function(e){return d(e)},companyName:s.company,currentName:n}),o.company&&c.company?Object(V.jsx)("div",{className:e.errorColor,children:o.company}):null,Object(V.jsx)("p",{}),Object(V.jsx)(Ee,{id:"amount",type:"number",variant:"outlined",label:"Amount",onChange:i,value:s.amount,onBlur:u,InputProps:{startAdornment:Object(V.jsx)(Z.a,{position:"start",children:Object(V.jsx)(it.a,{})}),inputProps:{min:0}}}),o.amount&&c.amount?Object(V.jsx)("div",{className:"errorColor",children:o.amount}):null,Object(V.jsx)("p",{}),Object(V.jsx)(dt,{price:t,handleChange:i}),Object(V.jsx)(lt,{price:t,amount:s.amount}),!j&&n?Object(V.jsx)("div",{children:Object(V.jsxs)(ct.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:[Object(V.jsx)(E.a,{disabled:l,variant:"contained",type:"submit",className:e.buyStockFormButton,children:"Buy"}),Object(V.jsx)(P.a,{className:"animationLastTypography",children:"Press buy and confirm."})]})}):Object(V.jsx)(E.a,{disabled:l,variant:"contained",type:"submit",className:e.buyStockFormButton,children:"Buy"}),Object(V.jsx)("p",{})]})}})})},mt=n(430),ht=function(){var e=tt(),t=Object(I.c)((function(e){return e.stock.stockName})),n=Object(I.c)((function(e){return e.purchase}));return Object(V.jsxs)("div",{className:e.stockPageFirstDiv,children:[Object(V.jsx)("div",{className:e.stockPageSecondDiv,children:n||t?Object(V.jsx)(V.Fragment,{}):Object(V.jsx)("div",{className:e.stockPageAnimationDiv,children:Object(V.jsxs)(ct.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:[Object(V.jsx)(P.a,{className:e.stockPageAnimationTypography,children:"Write here the symbol & select an amount."}),Object(V.jsx)(mt.a,{size:40})]})})}),Object(V.jsxs)("div",{className:e.mainChartDiv,children:[Object(V.jsx)("div",{className:e.mainChartWidth,children:Object(V.jsx)(at,{stock:t})}),Object(V.jsx)("div",{className:e.buyStocksHigherDiv,children:Object(V.jsx)(bt,{})})]}),Object(V.jsx)("div",{className:e.stockPageLastDiv})]})},pt=n(463),Ot=n(417),ft=n(431),gt=n(432),xt=n(433),vt=n(434),yt=n(435),wt=function(){var e=Object(I.b)(),t=Object(I.c)((function(e){return e.sidebar})),n=q(),a=Object(F.g)(),r=Object(I.c)((function(e){return e.purchase}));return Object(V.jsx)("div",{children:Object(V.jsx)(pt.a,{anchor:"left",open:t,onClose:function(){e(S("DISABLE"))},classes:{paper:n.paper},children:Object(V.jsx)("div",{children:Object(V.jsxs)(Ot.a,{children:[Object(V.jsxs)(ft.a,{button:!0,onClick:function(){return a.push("/myprofile")},children:[Object(V.jsx)(ee.a,{}),Object(V.jsx)(gt.a,{inset:!0,primary:"My profile"})]}),Object(V.jsx)(G.a,{classes:{root:n.divider}}),Object(V.jsxs)(ft.a,{button:!0,onClick:function(){a.push("/actions")},children:[Object(V.jsx)(xt.a,{}),Object(V.jsx)(gt.a,{inset:!0,primary:"Actions"})]}),Object(V.jsx)(G.a,{classes:{root:n.divider}}),Object(V.jsx)(ft.a,{button:!0,onClick:function(){return a.push("/buystocks")},children:r?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(vt.a,{style:{paddingTop:3}}),Object(V.jsx)(gt.a,{inset:!0,primary:"Buy stocks"})]}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(ct.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:Object(V.jsx)(vt.a,{style:{paddingTop:3}})}),Object(V.jsx)(ct.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:Object(V.jsx)(gt.a,{inset:!0,primary:"Buy stocks"})})]})}),Object(V.jsx)(G.a,{classes:{root:n.divider}}),Object(V.jsxs)(ft.a,{button:!0,onClick:function(){return a.push("/explore")},children:[Object(V.jsx)(yt.a,{}),Object(V.jsx)(gt.a,{inset:!0,primary:"Explore"})]})]})})})})},kt=n(469),Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mode:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_MODE":return{mode:!e.mode};default:return e}},St=n(437),Nt=n(440),Tt=n(439),At=n(436),Dt=n(438),Pt=n(208),Et=Object(z.a)({chartLoadingAnimation:{display:"flex",justifyContent:"center",paddingTop:"15px"},tableCellTitles:{color:"white"},oldDataButton:{background:"black",color:"white",width:150},analysisTableButton:{background:"black",color:"white"},myProfileLoadingAnimation:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},myProfileMainDiv:{background:"white",paddingBottom:"60vh",paddingTop:"10vh",margin:"5",display:"flex",flexDirection:"column"},myProfileCardTitle:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"},myProfileCardInfos:{fontSize:15,flex:1,textAlign:"center"},myProfileCardContentDiv:{display:"flex",flexDirection:"row",justifyContent:"space-between"},myProfileCardContentTypography:{fontWeight:"bold",fontSize:30,textAlign:"center"},myProfileCardContentNumberGreen:{color:"green",fontWeight:"bold",fontSize:30,textAlign:"center"},myProfileCardContentNumberRed:{color:"red",fontWeight:"bold",fontSize:30,textAlign:"center"},myProfileButton:{background:"black",color:"white"},modeTitles:{fontWeight:"bold",fontSize:25,color:"black",textAlign:"center",paddingTop:10,paddingBottom:10},myProfileTransationList:{display:"flex",flexDirection:"column",alignItems:"center"},myProfileAnalysisChartDiv:{width:"100%",justifyContent:"center"},myProfileAnalysisSecondDIv:{width:"100%",paddingLeft:"5vh",paddingRight:"5vh"},oldDataDiv:{display:"flex",paddingTop:"5vh",alignItems:"center",justifyContent:"center",flexDirection:"column"},errorColor:{color:"red"},transactionListDiv:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},transactionList:{display:"flex",flexDirection:"row",flexWrap:"wrap"},transactionListItem:{width:"50%",textAlign:"center"},black:{color:"black"},transactionListCollapsedItem:{display:"flex",alignItems:"center",flexDirection:"column"},animationSizes:{height:"0px",width:"0px"},tutorialMainText:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",paddingLeft:"2vh",paddingRight:"2vh"},tutorialArrow:{paddingTop:60,paddingLeft:7},tutorialTypography:{width:200,paddingLeft:7}}),It=function(e){var t=e.analysisData,n=e.holdings,a=e.getOldData,r=Et();return Object(V.jsx)(At.a,{component:Pt.a,children:Object(V.jsxs)(St.a,{"aria-label":"customized table",children:[Object(V.jsx)(Dt.a,{children:Object(V.jsxs)(Ne.a,{style:{background:"black"},children:[Object(V.jsx)(Tt.a,{className:r.tableCellTitles,align:"right",children:"Company"}),Object(V.jsx)(Tt.a,{className:r.tableCellTitles,align:"right",children:"Profit"}),Object(V.jsx)(Tt.a,{className:r.tableCellTitles,align:"right",children:"Average purchase value"}),Object(V.jsx)(Tt.a,{className:r.tableCellTitles,align:"right",children:"Current value"}),Object(V.jsx)(Tt.a,{className:r.tableCellTitles,align:"right",children:"Total amount"})]})}),Object(V.jsx)(Nt.a,{children:t.map((function(e){var t=n.filter((function(t){return t.usersStock.stockSymbol===e.name}))[0],s=(100*(e.sticks[e.sticks.length-1].close/(t.usersTotalOriginalPriceValue/t.usersTotalAmount)-1)).toFixed(2);return Object(V.jsxs)(De,{children:[Object(V.jsx)(Tt.a,{component:"th",scope:"row",children:Object(V.jsx)(E.a,{className:r.analysisTableButton,onClick:function(){try{return void a(e.name)}catch(t){$("Error.",t.message,"danger")}},children:e.name})}),parseFloat(s)>=0?Object(V.jsx)(Tt.a,{style:{color:"green"},align:"right",children:"".concat(parseFloat(s).toFixed(2),"%")}):Object(V.jsx)(Tt.a,{align:"right",style:{color:"red"},children:"".concat(parseFloat(s).toFixed(2),"%")}),Object(V.jsx)(Tt.a,{align:"right",children:(t.usersTotalOriginalPriceValue/t.usersTotalAmount).toFixed(2)}),Object(V.jsx)(Tt.a,{align:"right",children:e.sticks[e.sticks.length-1].close.toFixed(2)}),Object(V.jsx)(Tt.a,{align:"right",children:t.usersTotalAmount})]},"".concat(e.name))}))})]})})},Ft=function(e){var t=e.datas,n=e.analysisData,a=e.oldDataError,r=Et(),s=Object(ye.a)(le),i=Object(J.a)(s,1)[0];if(a)return $("API error.",a.message.includes("https://www.alphavantage.co/premium/")?"An error with Alpha Vantage's API: too frequent requests or bad API key.":a.message,"danger"),Object(V.jsx)(V.Fragment,{});if(!t)return Object(V.jsx)("div",{});var o=t.time_series.map((function(e){return e.date})),c=Object(x.a)(Object(x.a)({},Ae),{},{xaxis:{categories:o,type:"datetime",labels:{rotate:0}}}),l=[{name:"Value",data:t.time_series.map((function(e){return e.value.toFixed(2)}))}],d=we.b().shape({amount:we.a().required("Required field.").transform((function(e){return parseInt(e)})).min(1,"Amount must be at least one.")}),u=n.filter((function(e){return e.name===t.metadata.symbol}))[0];if(!u)return Object(V.jsx)("div",{});var j=u.sticks[u.sticks.length-1].close;return Object(V.jsxs)("div",{className:r.oldDataDiv,children:[Object(V.jsxs)(P.a,{style:{fontSize:20,fontWeight:"bold"},children:["Old data: ",t.metadata.symbol," (last refresh:"," "+t.metadata.lastRefresh,")"]}),Object(V.jsx)("div",{style:{width:"100%"},children:Object(V.jsx)(Ge.a,{options:c,series:l,type:"line",height:300})}),Object(V.jsx)(X.a,{initialValues:{amount:""},onSubmit:function(e){Object($e.confirmAlert)({title:"Confirmation",message:"Are you sure you want to sell ".concat(e.amount," x ").concat(t.metadata.symbol.toUpperCase()," \n                        (").concat((j*parseInt(e.amount)).toFixed(2),"$)?"),buttons:[{label:"Yes",onClick:function(){var n=Object(Q.a)(K.a.mark((function n(){return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i({variables:{stockName:u.name,amount:parseInt(e.amount),price:j}});case 3:$("Success.","You sold: ".concat(e.amount," x ").concat(t.metadata.symbol.toUpperCase(),"."),"success"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),$("An error occured",n.t0.message||"Something went wrong.","danger");case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}()},{label:"No",onClick:function(){$("Canceled","The sale was canceled.","info")}}]})},validationSchema:d,children:function(e){var n=e.handleSubmit,a=e.handleBlur,s=e.values,i=e.handleChange,o=e.errors,c=e.touched;return Object(V.jsxs)("form",{onSubmit:n,children:[Object(V.jsx)("p",{}),Object(V.jsx)(Pe,{id:"amount",type:"number",variant:"outlined",label:"Amount",onChange:i,value:s.amount,style:{width:150},onBlur:a,InputProps:{inputProps:{min:0}}}),o.amount&&c.amount?Object(V.jsx)("div",{className:r.errorColor,children:o.amount}):Object(V.jsx)(V.Fragment,{}),Object(V.jsx)("p",{}),Object(V.jsxs)(P.a,{style:{display:"flex",justifyContent:"center"},children:["Sell ",t.metadata.symbol," for ",j,"$?"]}),Object(V.jsx)("p",{}),Object(V.jsx)(E.a,{variant:"contained",type:"submit",className:r.oldDataButton,children:"Sell"}),Object(V.jsx)("p",{style:{fontSize:20}})]})}})]})},Bt=n(441),Ut=function(e){var t,n=e.analysisData,a=e.holdings,r=e.totalOriginalValue,s=e.isTogglable,i=Et(),o=Object(I.b)(),c=Object(Bt.a)(me),l=Object(J.a)(c,2),d=l[0],u=Object.assign({},l[1]),j=Object(I.c)((function(e){return e.mode}));if(n.length<1)return Object(V.jsx)("div",{className:i.chartLoadingAnimation,children:Object(V.jsx)(et,{type:"spin",color:"black"})});var b=0,m=n[0];n.forEach((function(e){e.sticks.length<b&&(b=(m=e).sticks.length)}));var h=m.sticks.map((function(e){return e.date})),p=[];h.forEach((function(e){var t=0;n.forEach((function(n){var r=n.sticks.filter((function(t){return t.date===e}));if(r.length>0)t+=r[0].close*a.filter((function(e){return e.usersStock.stockSymbol===n.name}))[0].usersTotalAmount;else{var s,i=99999,o=n.sticks[0];n.sticks.forEach((function(t){var n=Math.abs(new Date(t.date).getTime()-new Date(e).getTime());n<i&&(i=n,o=t)})),t+=o.close*(null===(s=a.filter((function(e){return e.usersStock.stockSymbol===n.name}))[0])||void 0===s?void 0:s.usersTotalAmount)}})),p=p.concat(parseFloat((100*(t/r-1)).toFixed(2)))}));var O=Object(x.a)(Object(x.a)({},Ae),{},{xaxis:{categories:h,type:Te,labels:{formatter:function(e){var t=new Date(e);return!1===j.mode?"".concat(t.getDate(),".").concat(t.getMonth()+1,", ").concat(Ie(t.getHours()),":").concat(Ie(t.getMinutes())):"".concat(t.getDate(),".").concat(t.getMonth()+1)}}},yaxis:{labels:{formatter:function(e){return"".concat(e.toFixed(2),"%")}}}}),f=[{name:"Portfolio value (%)",data:p}];return Object(V.jsxs)("div",{children:[Object(V.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(V.jsx)(P.a,{children:"Last 96 hours"}),Object(V.jsx)(kt.a,{color:"default",checked:j.mode,onChange:function(){return o({type:"CHANGE_MODE"})},disabled:s}),Object(V.jsx)(P.a,{children:"Daily since first transaction"})]}),Object(V.jsx)(Ge.a,{options:O,series:f,type:"line",height:300}),Object(V.jsx)(It,{getOldData:function(e){try{return void d({variables:{symbol:e}})}catch(t){return void $("Error.",t.message,"danger")}},analysisData:n,holdings:a}),Object(V.jsx)("div",{style:{width:"100%"},children:u.loading?Object(V.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"15px"},children:Object(V.jsx)(et,{type:"spin",color:"black"})}):Object(V.jsx)(Ft,{datas:null===(t=u.data)||void 0===t?void 0:t.stockHistory,analysisData:n,oldDataError:u.error})})]})},_t=n(450),Lt=n(451),Rt=n(452),Mt=n(132),$t=n.n(Mt),Ht=n(102),zt=n(442),qt=n(447),Vt=n(443),Wt=n(444),Gt=n(448),Yt=n(445),Kt=n(446),Qt=function(e){var t=Et(),n=e.transactions.map((function(e){return e._id.toString()})).reduce((function(e,t){return Object(x.a)(Object(x.a)({},e),{},Object(Ht.a)({},t,!1))}),{}),a=Object(v.useState)(n),r=Object(J.a)(a,2),s=r[0],i=r[1];return Object(V.jsxs)("div",{className:t.transactionListDiv,children:[Object(V.jsx)("div",{children:Object(V.jsx)(P.a,{className:t.modeTitles,children:e.transactionsWithOwner?"Actions":"Transactions"})}),Object(V.jsx)(Ot.a,{className:t.transactionList,component:"nav","aria-labelledby":"nested-list-subheader",children:e.transactions.map((function(n,a){var r=new Date(n.transactionDate),o=r.getDate()+"."+(r.getMonth()+1).toString()+"."+r.getFullYear()+", "+Ie(r.getHours())+":"+Ie(r.getMinutes());return Object(V.jsxs)("div",{className:t.transactionListItem,children:[Object(V.jsxs)(E.a,{onClick:function(){return e=n._id.toString(),void i((function(t){return Object(x.a)(Object(x.a)({},t),{},Object(Ht.a)({},e,!t[e]))}));var e},children:[Object(V.jsx)(zt.a,{children:"Buy"===n.transactionType?Object(V.jsx)(Vt.a,{}):Object(V.jsx)(Wt.a,{})}),Object(V.jsx)(gt.a,{primary:"".concat(n.transactionStock.stockSymbol," \n                                        ").concat(e.transactionsWithOwner?"("+e.transactionsWithOwner[a].transactionOwner+")":"")}),s[n._id.toString()]?Object(V.jsx)(Yt.a,{}):Object(V.jsx)(Kt.a,{})]}),Object(V.jsx)(qt.a,{in:s[n._id.toString()],timeout:"auto",children:Object(V.jsxs)(Ot.a,{component:"div",disablePadding:!0,className:t.transactionListCollapsedItem,children:[Object(V.jsxs)(E.a,{disabled:!0,className:t.black,children:[Object(V.jsx)(zt.a,{children:Object(V.jsx)(Gt.a,{})}),Object(V.jsx)(gt.a,{primary:"Date: ".concat(o)})]}),Object(V.jsxs)(E.a,{disabled:!0,className:t.black,children:[Object(V.jsx)(zt.a,{children:Object(V.jsx)(Gt.a,{})}),Object(V.jsx)(gt.a,{primary:"Price per share: ".concat(n.transactionStockPrice.toFixed(2))})]}),Object(V.jsxs)(E.a,{disabled:!0,className:t.black,children:[Object(V.jsx)(zt.a,{children:Object(V.jsx)(Gt.a,{})}),Object(V.jsx)(gt.a,{primary:"Amount: ".concat(n.transactionStockAmount)})]})]})})]},n.transactionDate)}))})]})},Jt=n(449),Xt=function(){var e=Et();return Object(V.jsxs)("div",{style:{background:"white"},children:[Object(V.jsx)("div",{className:e.animationSizes,children:Object(V.jsxs)(ct.AnimateKeyframes,{play:!0,iterationCount:"infinite",keyframes:["opacity: 0","opacity: 1"],duration:3,children:[Object(V.jsx)(Jt.a,{size:50,className:e.tutorialArrow}),Object(V.jsx)(P.a,{className:e.tutorialTypography,children:"Open the sidebar!"})]})}),Object(V.jsx)("div",{className:e.tutorialMainText,children:Object(V.jsx)(P.a,{children:"You have bought no stocks. Follow the instructions and glinting objects in order to buy one."})})]})},Zt=function(e){var t,n,a=e.stockSubscription,r=e.followSubscriptions,s=Et(),i=Object(Ye.a)(Oe),o=Object(I.b)(),c=Object(Ye.a)(pe,{variables:{mode:"days"}}),l=Object(Ye.a)(pe,{variables:{mode:"hours"}}),d=Object(v.useState)("Analysis"),u=Object(J.a)(d,2),j=u[0],b=u[1],m=Object(I.c)((function(e){return e.mode}));if(Object(v.useEffect)((function(){if(a||r)try{i.refetch(),c.refetch(),l.refetch()}catch(e){$("An error occured.","Error while downloading updates and new information.","danger")}}),[a,r]),"This user has no transactions."===(null===(t=c.error)||void 0===t?void 0:t.message)||"This user has no transactions."===(null===(n=l.error)||void 0===n?void 0:n.message))return o({type:"NO_PURCHASES"}),Object(V.jsx)(Xt,{});if(i.error||c.error||l.error){var h,p,O,f=(null===(h=i.error)||void 0===h?void 0:h.message)||(null===(p=c.error)||void 0===p?void 0:p.message)||(null===(O=l.error)||void 0===O?void 0:O.message);return $("An error occured.",f,"danger"),Object(V.jsx)("div",{className:s.myProfileLoadingAnimation,children:Object(V.jsx)(et,{type:"spin",color:"black"})})}if(i.loading||l.loading||!i.data||!l.data)return Object(V.jsx)("div",{className:s.myProfileLoadingAnimation,children:Object(V.jsx)(et,{type:"spin",color:"black"})});if(0===i.data.me.usersHoldings.length||0===i.data.me.usersTransactions.length)return o({type:"NO_PURCHASES"}),Object(V.jsx)(Xt,{});0!==i.data.me.usersHoldings.length&&o({type:"FIRST_PURCHASE"});var g=m.mode?c.data.currentPortfolioValue[0]:l.data.currentPortfolioValue[0],x=i.data.me.usersTransactions,y=i.data.me.usersHoldings.reduce((function(e,t){return e+t.usersTotalOriginalPriceValue}),0),w=parseFloat((100*(l.data.currentPortfolioValue[0].wholeValue/y-1)).toFixed(2));return Object(V.jsxs)("div",{className:s.myProfileMainDiv,children:[Object(V.jsx)("div",{style:{padding:15},children:Object(V.jsxs)(_t.a,{children:[Object(V.jsx)(Lt.a,{avatar:Object(V.jsx)($t.a,{size:100,name:i.data.me.usersUsername,variant:"marble",colors:["#808080","#FFFFFF","#000000"]}),title:Object(V.jsxs)("div",{className:s.myProfileCardTitle,children:[Object(V.jsx)(P.a,{style:{fontSize:30,flex:1},children:i.data.me.usersUsername}),Object(V.jsxs)("div",{style:{flex:1},children:[Object(V.jsx)(P.a,{className:s.myProfileCardInfos,children:i.data.me.followerCount||0}),Object(V.jsx)(P.a,{className:s.myProfileCardInfos,children:"Followers"})]}),Object(V.jsxs)("div",{style:{flex:1},children:[Object(V.jsx)(P.a,{className:s.myProfileCardInfos,children:i.data.me.followingCount||0}),Object(V.jsx)(P.a,{className:s.myProfileCardInfos,children:"Following"})]})]})}),Object(V.jsx)(Rt.a,{children:Object(V.jsxs)("div",{className:s.myProfileCardContentDiv,children:[Object(V.jsxs)("div",{style:{justifyContent:"center"},children:[Object(V.jsx)(P.a,{className:s.myProfileCardContentTypography,children:Math.round(l.data.currentPortfolioValue[0].wholeValue)}),Object(V.jsx)(P.a,{style:{textAlign:"center"},children:"Current value"})]}),Object(V.jsxs)("div",{children:[w>=0?Object(V.jsxs)(P.a,{className:s.myProfileCardContentNumberGreen,children:[w,"%"]}):Object(V.jsxs)(P.a,{className:s.myProfileCardContentNumberRed,children:[w,"%"]}),Object(V.jsx)(P.a,{style:{textAlign:"center"},children:"Profit all time"})]}),Object(V.jsxs)("div",{children:[Object(V.jsx)(P.a,{className:s.myProfileCardContentTypography,children:Math.round(y)}),Object(V.jsx)(P.a,{style:{textAlign:"center"},children:"Original value"})]}),Object(V.jsxs)("div",{children:[Math.round(i.data.me.moneyMade)>=0?Object(V.jsx)(P.a,{className:s.myProfileCardContentNumberGreen,children:Math.round(i.data.me.moneyMade)}):Object(V.jsx)(P.a,{className:s.myProfileCardContentNumberRed,children:Math.round(i.data.me.moneyMade)}),Object(V.jsx)(P.a,{style:{textAlign:"center"},children:"Profit"})]})]})})]})}),Object(V.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(V.jsx)("div",{style:{paddingBottom:"1vh",textAlign:"center"},children:Object(V.jsx)(E.a,{variant:"contained",type:"submit",onClick:function(){return b("Analysis")},className:s.myProfileButton,children:"Analysis"})}),Object(V.jsx)("div",{style:{paddingBottom:"1vh",textAlign:"center"},children:Object(V.jsx)(E.a,{variant:"contained",type:"submit",onClick:function(){return b("Transactions")},className:s.myProfileButton,children:"Transactions"})})]}),"Analysis"===j?Object(V.jsx)("div",{children:Object(V.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(V.jsxs)("div",{className:s.myProfileAnalysisSecondDIv,children:[Object(V.jsx)(P.a,{className:s.modeTitles,children:"Analysis"}),Object(V.jsx)("div",{children:Object(V.jsx)("div",{className:s.myProfileAnalysisChartDiv,children:Object(V.jsx)(Ut,{totalOriginalValue:y,analysisData:g.analysisValues,holdings:i.data.me.usersHoldings,isTogglable:!c.data})})})]})})}):Object(V.jsx)("div",{className:s.myProfileTransationList,children:Object(V.jsx)(Qt,{transactions:x})})]})},en=function(){var e=q(),t=Object(I.c)((function(e){return e.user.username}));return Object(V.jsxs)("div",{className:e.defaultPageDiv,children:[Object(V.jsx)(P.a,{className:e.defaultPageTitle,children:t?"You are logged in.":"You are not logged in."}),Object(V.jsx)(P.a,{style:{display:"flex",justifyContent:"center",paddingLeft:"20vw",paddingRight:"20vw"},children:"Welcome to InvShare."})]})},tn=n(466),nn=Object(z.a)({loadingAnimationDiv:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},specificExploreFirstDiv:{background:"white",paddingBottom:"60vh",paddingTop:"10vh",margin:5,display:"flex",flexDirection:"column"},specificExploreTypography:{fontSize:15,flex:1,textAlign:"center"},cardTitleDiv:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap"},cardTypography:{flex:1,fontSize:20},followAmountsDiv:{flex:1,paddingTop:15},cardContentDiv:{display:"flex",flexDirection:"row",justifyContent:"space-around"},cardContentTypography:{fontWeigt:"bold",fontSize:30,textAlign:"center"},transactionListDiv:{fontWeight:"bold",fontSize:30,textAlign:"center"},followButton:{background:"black",color:"white"},autoComplete:{width:"60vw",paddingRight:"1vw",justifyContent:"center",alignItems:"center",display:"flex"},searchField:{border:"2px solid black",borderRadius:7,padding:20},exploreTitle:{fontSize:30,paddingBottom:10},explorePageFirstDiv:{backgroundColor:"white",textAlign:"center",margin:5},explorePageSecondDiv:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"}}),an=n(42),rn=n(453),sn=n(461),on=function(e){var t,n,a=e.username,r=e.handleChange,s=e.handleBlur,i=e.setFinalUser,o=function(e){if(!Be(e))throw $("Error.","Username must be a string.","danger"),new Error("Username must be a string.");return e}(a),c=nn(),l=Object(Bt.a)(be),d=Object(J.a)(l,2),u=d[0],j=Object.assign({},d[1]),b=Object(ot.a)(o,750),m=Object(J.a)(b,1)[0],h=Object(v.useState)(void 0===(null===(t=j.data)||void 0===t?void 0:t.searchUser)?[]:null===(n=j.data)||void 0===n?void 0:n.searchUser.map((function(e){return e.usersUsername}))),p=Object(J.a)(h,2),O=p[0],f=p[1],g=Object(v.useState)(!1),y=Object(J.a)(g,2),w=y[0],k=y[1],C=w&&0!==O.length;Object(v.useEffect)((function(){""!==m&&u({variables:{username:m}})}),[m]),Object(v.useEffect)((function(){var e;void 0!==(null===(e=j.data)||void 0===e?void 0:e.searchUser)?f(j.data.searchUser.map((function(e){return e.usersUsername}))):f([])}),[j.data]);var S=function(e){r(e)};return Object(v.useEffect)((function(){var e=!0;if(C)return e&&f(Object(an.a)(O)),function(){e=!1}}),[C]),Object(V.jsx)(sn.a,{id:"username",className:c.autoComplete,open:w,onOpen:function(){k(!0)},onClose:function(){k(!1),f([])},getOptionLabel:function(e){return e},options:O,popupIcon:Object(V.jsx)("div",{}),loading:C,autoHighlight:!0,onChange:function(e,t){i(t)},autoSelect:!0,noOptionsText:"No users found",renderInput:function(e){return Object(V.jsx)(Ce.a,Object(x.a)(Object(x.a)({},e),{},{id:"username",name:"username",onBlur:s,onChange:S,className:c.searchField,value:o,InputProps:Object(x.a)(Object(x.a)({},e.InputProps),{},{startAdornment:Object(V.jsx)(Z.a,{position:"start",children:Object(V.jsx)(rn.a,{})}),disableUnderline:!0})}))}})},cn=function(){var e=nn(),t=Object(v.useState)(""),n=Object(J.a)(t,2),a=n[0],r=n[1],s=Object(Ye.a)(ie,{variables:{username:a}}).refetch,i=Object(F.g)(),o=function(){var e=Object(Q.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.useEffect)((function(){""!==a&&o().then((function(e){1===e.data.searchUser.length?i.push("/explore/".concat(e.data.searchUser[0].usersUsername)):$("Something went wrong.","Your search was not precise enough or no user was found.","info")}))}),[a]),Object(V.jsx)("div",{className:e.explorePageFirstDiv,children:Object(V.jsxs)("div",{className:e.explorePageSecondDiv,children:[Object(V.jsx)(P.a,{className:e.exploreTitle,children:"Explore"}),Object(V.jsx)(X.a,{initialValues:{username:""},onSubmit:function(e){r(e.username)},children:function(e){var t=e.values,n=e.handleChange,a=e.handleBlur,s=e.handleSubmit;return Object(V.jsx)("form",{onSubmit:s,children:Object(V.jsx)(on,{handleChange:n,handleBlur:a,username:t.username,handleSubmit:s,setFinalUser:r})})}})]})})},ln=n(153),dn=function(e){var t=e.followSubscriptions,n=nn(),a=Object(F.i)(),r=Object(Ye.a)(ie,{variables:{username:a.id}}),s=Object(ye.a)(oe,{variables:{username:a.id}}),i=Object(ln.a)(s),o=i[0],c=i.slice(1),l=Object(I.c)((function(e){return e.user.username})),d=Object(ye.a)(de,{variables:{username:a.id}}),u=Object(ln.a)(d),j=u[0],b=u.slice(1);if(Object(v.useEffect)((function(){if(t)try{r.refetch()}catch(e){$("Error.","Something went wrong while trying to update the page.","danger")}}),[t]),r.loading)return Object(V.jsx)("div",{className:n.loadingAnimationDiv,children:Object(V.jsx)(et,{type:"spin",color:"black"})});var m=function(){var e=Object(Q.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:$("Success","You followed ".concat(a.id,"."),"success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),$("Error.",(null===(t=c[0].error)||void 0===t?void 0:t.graphQLErrors[0].message)||"An error occured.","danger");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(Q.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j();case 3:$("Success","You unfollowed ".concat(a.id,"."),"success"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),$("Error.",(null===(t=b[0].error)||void 0===t?void 0:t.graphQLErrors[0].message)||"An error occured.","danger");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:n.specificExploreFirstDiv,children:[Object(V.jsx)("div",{style:{padding:15},children:Object(V.jsxs)(_t.a,{children:[Object(V.jsx)(Lt.a,{avatar:Object(V.jsx)($t.a,{size:100,name:r.data.searchUser[0].usersUsername,variant:"marble",colors:["#808080","#FFFFFF","#000000"]}),title:Object(V.jsxs)("div",{className:n.cardTitleDiv,children:[Object(V.jsxs)("div",{style:{flex:2},children:[Object(V.jsx)(P.a,{className:n.cardTypography,children:r.data.searchUser[0].usersUsername}),Object(V.jsx)(P.a,{className:n.cardTypography,children:r.data.searchUser[0].usersFollowers.filter((function(e){return e.user.usersUsername===l})).length>0?Object(V.jsx)(E.a,{className:n.followButton,onClick:h,children:"Unfollow"}):Object(V.jsx)(E.a,{className:n.followButton,onClick:m,children:"Follow"})})]}),Object(V.jsxs)("div",{className:n.followAmountsDiv,children:[Object(V.jsx)(P.a,{className:n.specificExploreTypography,children:r.data.searchUser[0].followerCount||0}),Object(V.jsx)(P.a,{className:n.specificExploreTypography,children:"Followers"})]}),Object(V.jsxs)("div",{className:n.followAmountsDiv,children:[Object(V.jsx)(P.a,{className:n.specificExploreTypography,children:r.data.searchUser[0].followingCount||0}),Object(V.jsx)(P.a,{className:n.specificExploreTypography,children:"Following"})]})]})}),Object(V.jsx)(Rt.a,{children:Object(V.jsx)("div",{className:n.cardContentDiv,children:Object(V.jsxs)("div",{style:{justifyContent:"center"},children:[Object(V.jsx)(P.a,{className:n.cardContentTypography,children:(r.data.searchUser[0].moneyMade||0).toFixed(2)}),Object(V.jsx)(P.a,{style:{textAlign:"center"},children:"Money made"})]})})})]})}),Object(V.jsx)("div",{className:n.transactionListDiv,children:Object(V.jsx)(Qt,{transactions:r.data.searchUser[0].usersTransactions||0})})]})},un=Object(z.a)({noActionsTypography:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"50vh"},noActionsDiv:{background:"white",paddingBottom:"60vh",paddingTop:"15vh",margin:5},loadingAnimation:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh"},transactionListDiv:{background:"white",paddingBottom:"60vh",paddingTop:"15vh",margin:5}}),jn=function(){var e=un(),t=Object(Ye.a)(he);if(t.loading)return Object(V.jsx)("div",{className:e.loadingAnimation,children:Object(V.jsx)(et,{type:"spin",color:"black"})});var n=t.data.getActions.map((function(e){return e.transaction}));return 0===n.length?Object(V.jsx)("div",{className:e.noActionsDiv,children:Object(V.jsx)(P.a,{className:e.noActionsTypography,children:"No actions yet. Follow someone or tell the users you follow to buy and sell stocks."})}):Object(V.jsx)("div",{className:e.transactionListDiv,children:Object(V.jsx)(Qt,{transactions:n,transactionsWithOwner:t.data.getActions})})};var bn=function(){var e,t,n,a,r,s,i,o,c,l=Object(I.c)((function(e){return e.user.username})),d=Object(tn.a)(ge,{variables:{username:l}}),u=Object(tn.a)(xe,{variables:{username:l}}),j={trans:null===(e=d.data)||void 0===e||null===(t=e.stockEvent)||void 0===t?void 0:t.transaction,me:null===(n=d.data)||void 0===n?void 0:n.stockEvent.me};return Object(V.jsxs)("div",{children:[Object(V.jsx)(M.a,{}),Object(V.jsx)(B.a,{children:Object(V.jsxs)(F.d,{children:[Object(V.jsx)(F.b,{path:"/actions",exact:!0,children:Object(V.jsxs)("div",{children:[Object(V.jsx)(wt,{}),Object(V.jsx)(W,{stockSubscription:j}),Object(V.jsx)(jn,{})]})}),Object(V.jsx)(F.b,{path:"/login",exact:!0,children:Object(V.jsxs)("div",{children:[Object(V.jsx)(wt,{}),Object(V.jsx)(W,{stockSubscription:j}),Object(V.jsx)(qe,{})]})}),Object(V.jsx)(F.b,{path:"/myprofile",exact:!0,children:l?Object(V.jsxs)("div",{children:[Object(V.jsx)(wt,{}),Object(V.jsx)(W,{stockSubscription:j}),Object(V.jsx)(Zt,{stockSubscription:null===(a=d.data)||void 0===a||null===(r=a.stockEvent)||void 0===r?void 0:r.transaction.transactionDate,followSubscriptions:null===(s=u.data)||void 0===s||null===(i=s.followEvent)||void 0===i?void 0:i.date})]}):Object(V.jsx)(F.a,{to:"/login"})}),Object(V.jsx)(F.b,{path:"/buystocks",exact:!0,children:l?Object(V.jsxs)("div",{children:[Object(V.jsx)(wt,{}),Object(V.jsx)(W,{stockSubscription:j}),Object(V.jsx)(ht,{})]}):Object(V.jsx)(F.a,{to:"/login"})}),Object(V.jsxs)(F.b,{path:"/login",exact:!0,children:[Object(V.jsxs)("div",{children:[Object(V.jsx)(wt,{}),Object(V.jsx)(W,{stockSubscription:j})]}),Object(V.jsx)(qe,{})]}),Object(V.jsxs)(F.b,{path:"/explore",exact:!0,children:[Object(V.jsxs)("div",{children:[Object(V.jsx)(wt,{}),Object(V.jsx)(W,{stockSubscription:j})]}),Object(V.jsx)(cn,{})]}),Object(V.jsx)(F.b,{path:"/explore/:id",exact:!0,children:Object(V.jsxs)("div",{children:[Object(V.jsx)(wt,{}),Object(V.jsx)(W,{stockSubscription:j}),Object(V.jsx)(dn,{followSubscriptions:null===(o=u.data)||void 0===o||null===(c=o.followEvent)||void 0===c?void 0:c.date})]})}),Object(V.jsx)(F.b,{path:"/",exact:!0,children:Object(V.jsxs)("div",{children:[Object(V.jsx)(wt,{}),Object(V.jsx)(W,{stockSubscription:j}),Object(V.jsx)(en,{})]})}),Object(V.jsx)(F.b,{path:"/",children:Object(V.jsx)(F.a,{to:"/"})})]})})]})},mn=n(156),hn=n(459),pn=n(454),On=n(457),fn=n(460),gn=n(455),xn=n(78),vn=n(205),yn=n(203);n(356).config();var wn=Object(mn.a)({user:_,sidebar:N,stock:Je,mode:Ct,purchase:L,notification:H}),kn="https://fso2021practicework.herokuapp.com/graphql",Cn=new hn.a({uri:kn}),Sn="wss://fso2021practicework.herokuapp.com/subscriptions";console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_DEVELOPMENT_BACKEND:"http://localhost:3001/graphql",REACT_APP_DEVELOPMENT_WEBSOCKET:"ws://localhost:3001/subscriptions",REACT_APP_PRODUCTION_BACKEND:"https://fso2021practicework.herokuapp.com/graphql",REACT_APP_PRODUCTION_WEBSOCKET:"wss://fso2021practicework.herokuapp.com/subscriptions"})),console.log(kn),console.log(Sn);var Nn=new yn.a({uri:Sn,options:{reconnect:!0}}),Tn=Object(mn.b)(wn),An=Object(vn.a)((function(e,t){var n=t.headers,a=localStorage.getItem("usersToken");return{headers:Object(x.a)(Object(x.a)({},n),{},{authorization:a?"bearer ".concat(a):null})}})),Dn=Object(pn.a)((function(e){var t=e.query,n=Object(xn.e)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),Nn,An.concat(Cn)),Pn=new On.a({cache:new fn.a,link:Dn});w.a.render(Object(V.jsx)(I.a,{store:Tn,children:Object(V.jsx)(gn.a,{client:Pn,children:Object(V.jsx)(bn,{})})}),document.getElementById("root"))}},[[369,1,2]]]);
//# sourceMappingURL=main.e1ae0a55.chunk.js.map